[R语言基础](#top)

- [预备知识](#预备知识)
  - [文件相关函数](#文件相关函数)
- [Basic](#basic)
  - [向量](#向量)
  - [向量的创建](#向量的创建)
  - [向量的索引（向量元素的提取、删除、添加）](#向量的索引向量元素的提取删除添加)
  - [函数](#函数-1)
  - [控制语句](#控制语句)
- [矩阵](#矩阵)
  - [矩阵的创建](#矩阵的创建)
  - [Data Analysis(EDA) Cycle](#data-analysiseda-cycle)

-------------

## 预备知识

- 获取工作目录: 使用`getwd()`函数获取当前工作目录
- 设置工作目录: 使用`setwd()`函数更改当前目录
- 注释
  - 单行注释： `#`号，写代码一定要常写注释，不然时间久了会忘记某代码的作用，便于后续操作。
  - 多行注释: 在Rstudio中可以使用Ctrl+shift+C经行多行注释
- 赋值
  - 左箭头`<-`, <键+-键（等号左边的那个，不要按Shift）
  - 等号`=`
  - 右箭头`->`
- 查看变量
  1. 命令行直接输入变量名
  2. print()函数
- 清除变量
  - 查看变量：`ls()`
  - 清除指定变量：`rm()`
  - 清除所有变量：`rm(list=ls())`
- 帮助文档查询
  - `?查询的函数`
  - `help()`函数
  - `example()`函数
- 安装R包:  `install.packages("openxlsx")`

### 文件相关函数

- 文件的读取
  - `scan(file = "", what = double(), nmax = -1, n = -1, sep =" ")`
    - file=" "的双引号里写文件地址
    - what写读入的数据类型，如果文件有好几种类型，可以啥也不写（what=" "）
    - sep表示文件中数据的分隔符
  - `readline()`函数: 从键盘中读入一行数据
  - `readLines()`函数: 可以一次性读取整个文件,可以限制读取的行数
  - `read.table()`函数: 主要用于读取矩阵数据框文件(可以读取.xlsx格式文件)
  - `read.xlsx()`函数： 读入.xlsx文件，使用该函数需要安装"openxlsx包
- 文件的输出
  - `write.table()`函数: `write("Hello,wrold","C://Users//橙//Desktop//juli.txt")`
  - `cat()`函数
    - `cat("hello wrold",file="C://Users//橙//Desktop//juli.txt",append=T)#追加写入，（里面有内容）`
    - `cat("hello wrold",file="C://Users//橙//Desktop//juli1.txt")  #覆盖写入，里面的内容被覆盖了`
- 保存数据: save()
  - `save(b,file="xxx.Rdata")`    保存b,文件是xxx，格式为.Rdata
  - `save(b,c,file="xxx.Rdata")`  保存b,c,文件是xxx，格式为.Rdata
  - `save.image("xxx.Rdata")`     保存所有，文件是xxx，格式为.Rdata
  
`read.table(file, header = FALSE, sep = "", quote = "\"'",dec = ".", numerals = c("allow.loss", "warn.loss", "no.loss"),row.names, col.names, as.is = !stringsAsFactors，na.strings = "NA", colClasses = NA, nrows = -1,skip = 0, check.names = TRUE, fill = !blank.lines.skip,strip.white = FALSE, blank.lines.skip = TRUE,comment.char = "#",allowEscapes = FALSE, flush = FALSE,stringsAsFactors = FALSE,fileEncoding = "", encoding = "unknown", text, skipNul = FALSE)`

|参数|说明|
|---|---|
|file|文件名（包在" "内，或使用一个字符型变量），可能需要全部路径（注意即使是在Windows下，符号\也不允许包含在内，必须使用/替换），或者一个URL链接|
|header|	一个逻辑值（FALSE,TRUE），用来反映这个文件的第一行是否包含变量名|
|sep|文件中的字段分离符，例如对用制表符的文件使用sep="\t"|
|quote|	指定用于包围字符型数据的字符|
|dec|	用来表示小数点的字符|
|row.names|	保存着行名的向量，或文件中的一个变量的序号或名字，缺省时行号取为1，2，3····|
|col.names|	指定列名的字符型的向量（缺省值是：v1,v2,v3····）|
|as.is|	控制字符型向量是否转化为因子型变量（如果值为FALSE），或者仍将其保留为字符型（TRUE）。as.is可以是逻辑值，数值型或者字符型向量，用来判断变量是否保留为字符|
|na.strings	|代表缺失数据的值(转化为NA)|
|colClasses	|指定各列的数据类型的一个字符型向量|
|nrows	|可以读取的最大行数（忽略负值）|
|skip|	在读取行数据前跳过的行数|
|check.names	|如果为TRUE，则检查变量名是否在R中有效|
|fill	|如果为TRUE，且非所有的行中变量数目相同，则用空白补齐|
···	···

[back to top](#top)

## Basic

- R packages
  - robustbase程序包：大致包括回归方法，包括模型选择和多元统计等
  - ggplot2程序包： 将绘图与数据分离，数据相关的绘图等
- 六种调用帮助文件的代码：
  - ?t.test
  - RGui>Help>Html help
  - apropos("t.test")
  - help("t.test")
  - help.search("t.test")
  - 查看R包pdf手册

### 向量

- 向量(vector)是R语言的最基本的数据类型、R语言的核心、向量是用于存储数值型、字符型或逻辑型数据的一维结构

### 向量的创建

- `c()`
- `vector()` - 建立一个空向量

```r
# 向量的创建 c()
a<-c(1,2,3,4,5)       #存储的数据是数值型，直接用逗号隔开
a<-c(1:5)             #与第一行代码意思是一样的，因为是连续的，所以用1：5表示1到5的五个数
b<-c("R","Rstudio")   #储存的是字符型数据，字符型的数据要加双引号
c<-c(TRUE,FALSE,T,F)  #储存的数据是逻辑型的，TRUE与T是一样的，T是TRUE的简写，F是FALSE的简写
# 用vector()函数建立一个空向量
d<-vector(length=10)   #建立了一个名字为d的空向量，长度为10, 空向量里默认值都为FALSE
```

### 向量的索引（向量元素的提取、删除、添加）

1. 查看: 使用中括号[]进行索引
2. 向量中元素的更改: 直接进行索引赋值
3. 向量中元素的删除: 负索引
4. 向量元素的添加:
5. 向量长度的获取: `length(a1)`
6. 数据类型转换
   1. 当向量元素同时含有数值型与逻辑型时，返回结果为数值型，逻辑性转变为数值型，其中FALSE转变为0，TRUE转变为1
   2. 当向量同时含有数值型、逻辑型与字符型时，全部转变为字符型
   3. 逻辑性可以转化为数值型与字符型，数值型可以转化为字符型，注意：字符型不可以转换为逻辑与数值型
   4. `as.数据类型()`可以进行强制转换
7. 向量的计算
   1. 向量的循环补齐（加）
   2. 向量相乘，使用*号。长度相同时，两向量对应元素相乘，但长度不同时会出现警告，会使用向量循环补齐的方式计算
   3. 向量取余使用%%,长度相同时，对应元素取余，长度不同时，出现警告，循环补齐式取余
   4. 向量的长度不相同的计算会出现警告
8. `NA`/`NULL`
   1. `NA`表示存在但未知的数: 当数据中存在NA值是，要么删掉，但可能会让结果有偏差（尤其是在做科研时处理较大的数据时慎重考虑），要么给它一个这组数据的平均数或者是其他，看你处理什么数据与看你的需求
   2.` NULL`代表不存在的数

```r
a<-c(1,2,3,4,5)
a[2]               # 查看a中第2个元素, 2
a[c(1,3)]          # 查看a中第1和第3个元素，可以使用向量的方式一次查看多个, 1 3
c<-c(TRUE,FALSE,T,F,F)    # 当然还有骚操作，这里有一个逻辑型向量c,试试用a索引它
> a[c]                    # 结果可以看到，返回的是TRUE对应位置的元素，这个操作我不知道教材上有没有，这是我意外摸索出来的
# 向量中元素的更改: 直接进行索引赋值
a[2]<-4       #a中第二个元素改为4
a[c(1,5)]<-7   #我把a中的第1和第5改为7
# 向量中元素的删除: 负索引
e<-a[-2]         # 负索引以下第2个位置，把第2位删掉并赋给一个新向量e, 原向量a不变,1 3 4 5
f1<-a[c(-1,-3)]  # 2 4 5
# 向量元素的添加
g1<-c(a[1:2],6,a[3:5])  # 1 2 6 3 4 5
# 强制数据类型转换
c1<-c(1,5,FALSE,TRUE)
as.character(c1)        #将c1强制转换为字符型 "1" "5" "0" "1"
as.numeric(c1)         #将c1强制转换为数值型   1 5 0 1
# 1.向量的循环补齐，使用向量相加的例子举例，（相加与相减类似）如：
c(3,4)+c(8,9)  #8+3=11，9+4=13，这是两个向量长度相同的
c(2,4)+c(2,3,4,5,6)  #2+2，3+4，4+2，5+4，6+2，能算，但长度不相同的会出现警告
# [1] 4 7 6 9 8
# Warning message:
# In c(2, 4) + c(2, 3, 4, 5, 6) : longer object length is not a multiple of shorter object length
# 2.向量相乘，使用*号。长度相同时，两向量对应元素相乘，但长度不同时会出现警告，会使用向量循环补齐的方式计算，如下：
c(1,3)*c(3,5)    #长度相同，对应元素相乘，3×1，5×3
c(1,3,5)*c(2,4,7,8,10)  #长度不同，补齐方式计算，2×1，4×3，7×5，8×1，10×3, 但长度不相同的会出现警告
# 3.向量取余使用%%,长度相同时，对应元素取余，长度不同时，出现警告，循环补齐式取余，请看如下代码：
c(1,3)%%c(5,9)    #1÷5余1，3÷9余3，长度相同，对应元素取余
>(5,9)%%c(1,3)    #5÷1余0，9÷3余0，长度相同，对应元素取余 0 0
> c(1,3,10)%%c(2,4,5,8,3)  #长度不同，1÷2余1，3÷4余3，10÷5余0，1÷8余1，3÷3余0, 但长度不相同的会出现警告
```

[back to top](#top)

### 函数

|函数|说明|
|---|---|
| seq() |seq(from,to,by=), 从什么到什么，间隔（by）为多少，（等差数列，公差就是by的值）|
| |seq(from,to,length.out=),从什么到什么，长度为多少|
|rep()|rep(x,time)，x重复time次，rep是重复repeat的简写|
| |rep(x,each)，每个连续重复each次|
|all()|判断元素是否都符合条件，返回逻辑值 ，只要有一个不满足，返回FALSE|
|ang()|判断是否有元素满足条件，返回逻辑值，只要有一个满足，返回TRUE|
|match()|判断向量A的元素在向量B里是否有，若有则返回在B中的位置，若没有，则返回NA；两向量长度不等时，循环补齐时判断，要注意时哪一个向量要循环|
|which()| 返回满足条件元素的位置，注意是返回位置|
|subset()|返回符合条件的元素，但会忽略NA值。注意：条件应为逻辑值，否则会报错|
|ifelse(x,a,b)|判断元素x是否符合条件，如符合，返回a，若不符合，返回b|
|all(d1, d2)|判断d1与d2是否相等|
|identical（）|判断两向量是否相等，返回逻辑值|

[back to top](#top)

### 控制语句

- `for(i in x){·········}`
- `while(a==3) {}`
- `repeat()函数`: 搭配if、break使用，不用break跳出程序将陷入死循环
- `if(···){···}else{···}`

```r
repeat
{
  a<-a+1
  if(a>7)
  {
    break
  }
}
```

[back to top](#top)

## 矩阵

- 矩阵（matrix) 是一种特殊的向量，包含两个附加的属性：行数和列数，R生存矩阵时按列存储

### 矩阵的创建

- 利用函数matrix()函数
- 利用函数将向量接起来，函数有rbind()按行接起来、cbind()按列接起来
- 强制转换为矩阵, `as.matrix()`
- 当两个向量长度不相等时，会出现警告，长度不等的那个向量会用循环补齐的形式填补

### Data Analysis(EDA) Cycle

> References
 - [R语言中文社区](http://suo.im/5qOwAU)
 - [R语言入门中文论坛](http://www.crug.org/)
 - [统计之都](https://cosx.org/)
 - [R资源列表 NCEAS](http://suo.im/5qOwtY)
 - [R语言基础入门（学习笔记通俗易懂版）](https://zhuanlan.zhihu.com/p/632482024)
 - https://ggplot2.tidyverse.org/
 - https://www.tidyverse.org/
