[瀑布流实现的几种方案](#top)

- [columns多列布局](#columns多列布局)
- [grid布局](#grid布局)
- [flex布局](#flex布局)
- [使用现成的库 比如masonry.js](#使用现成的库-比如masonryjs)

----------------------------------------------------
```js
export const images = Array.from({ length: 12 }).map((v, index) => ({
  id: index,
  src: `https://api.ckvv.net/photos/random?id=${index}`
}));
```
--------------------------------

## columns多列布局

```css
div class="gap-x-4 columns-3 md:columns-4">
{ images.map(v => {
  return (<div class="mb-4"><img src={v.src} class="w-full"/></div>)
}) }
</div>
```

## grid布局

- 使用 grid-template-columns 创建一个多列网格布局。
- 使用 grid-auto-rows 设置行的高度，并结合 grid-row 属性控制项目的跨行跨度，动态调整项目的高度
  - `display: grid`
  - `grid-template-columns: 1fr 1fr 1fr;` - 分为3列
  - `grid-template-rows: 1fr 1fr 1fr;`    - 分为3行
  - `column-gap: 5px;`                    - 列间距5px
  - `grid-row-start:1;`
  - `grid-row-end: span 2;` - 表示上下边框或左右边框跨越2网格

## flex布局

- grid和flex布局都需要动态计算每列的高度，将内容分配到高度最小的列

## 使用现成的库 比如masonry.js

```html
<div class="grid">
{ images.map(v => {
  return (<div class="grid-item w-[calc(33.3%-10.6px)] md:w-[calc(25%-12px)] h-max mb-4"><img src={v.src} class="w-full"/></div>)
}) }
</div>
<script type="module">
import 'https://unpkg.com/masonry-layout@4.2.2/dist/masonry.pkgd.min.js';

window.addEventListener('load', () => {
  new Masonry( '.grid', {
    "itemSelector": ".grid-item",
    "columnWidth": ".grid-item",
    "gutter": 16,
  });
});
</script>
```

> References
- [瀑布流实现的几种方案](https://ckvv.net/blog/css/waterfall-layout-solutions/)
- [深度解析瀑布流布局](https://github.com/chenqf/frontEndBlog/issues/17)
  - [multi-column](https://codesandbox.io/s/masonry-column-2-nnw63)
  - [grid](https://codesandbox.io/s/masonry-grid-3-8smrj)
  - [flexbox](https://codesandbox.io/s/masonry-flex-1-bigeg)
