[Azure Fundamentals](#top)

- [Azure Ecosystem](#azure-ecosystem)
  - [Azure Data Centers](#azure-data-centers)
  - [Azure Regions or location](#azure-regions-or-location)
    - [Azure Availablity Zones](#azure-availablity-zones)
  - [Azure Portal](#azure-portal)
  - [Azure CLI](#azure-cli)
  - [Azure Cloud Shell CLI](#azure-cloud-shell-cli)
  - [Azure Powershell](#azure-powershell)
- [Storage Components](#storage-components)
  - [Types of Azure Disk storage](#types-of-azure-disk-storage)
  - [Configure Azure Disk Storage](#configure-azure-disk-storage)
  - [Azure Blob Storage](#azure-blob-storage)
  - [Create a storage account](#create-a-storage-account)
  - [Azure BLOB storage management](#azure-blob-storage-management)
  - [Azure files and Azure file Storages](#azure-files-and-azure-file-storages)
  - [Azure Key Vault](#azure-key-vault)
- [Network Components](#network-components)
  - [Software Defined Networking(SDN)](#software-defined-networkingsdn)
  - [Azure Virtual Networks(Vnets)](#azure-virtual-networksvnets)
  - [Azure Virtual Networks Management](#azure-virtual-networks-management)
  - [Azure IP addressing](#azure-ip-addressing)
  - [Azure VPN Gateway](#azure-vpn-gateway)
  - [Azure Application Gateway](#azure-application-gateway)
  - [Content Delivery Networks(CDNs)](#content-delivery-networkscdns)
- [Azure Virtual Machine](#azure-virtual-machine)
  - [Windows VM Deployment](#windows-vm-deployment)
  - [Linux VM Deployment](#linux-vm-deployment)
  - [Connect to Azure VM](#connect-to-azure-vm)
- [Database Solutions](#database-solutions)
  - [Azure SQL Database](#azure-sql-database)
  - [Azure Database Migration Service](#azure-database-migration-service)
  - [Azure SQL Geo-Replication](#azure-sql-geo-replication)
  - [NoSQL](#nosql)
  - [CosmosDB](#cosmosdb)
- [Big Data Analytics](#big-data-analytics)
  - [Azure SQL Data Warehouse](#azure-sql-data-warehouse)
  - [Azure HDInsight](#azure-hdinsight)
  - [Azure Data Lake Analytics](#azure-data-lake-analytics)
  - [Azure Databricks](#azure-databricks)
- [Internet of Things(IoT)](#internet-of-thingsiot)
  - [Azure IoT Central](#azure-iot-central)
  - [Azure IoT Hub](#azure-iot-hub)
  - [Azure IoT Edge](#azure-iot-edge)
  - [Azure IoT solution Accelerators](#azure-iot-solution-accelerators)
  - [Azure Cognitive Services](#azure-cognitive-services)
  - [Azure Machine Learning Studio workspace](#azure-machine-learning-studio-workspace)
- [Azure Data Privacy](#azure-data-privacy)
  - [Common Data Privacy Frameworks](#common-data-privacy-frameworks)
  - [Azure security Center](#azure-security-center)
  - [Azure Service Trust portal](#azure-service-trust-portal)
  - [Block Public SSH(linux) and RDP(windows) traffic](#block-public-sshlinux-and-rdpwindows-traffic)
  - [Azure Government Services](#azure-government-services)
  - [Azure Germany Services](#azure-germany-services)
  - [Azure PCI DSS Compliance](#azure-pci-dss-compliance)
  - [Azure service Level Agreement(SLA)](#azure-service-level-agreementsla)
  - [Azure Preview Features and General Availability(GA)](#azure-preview-features-and-general-availabilityga)
- [Azure Network Security](#azure-network-security)
  - [Azure Firewall](#azure-firewall)
  - [Azure DDoS](#azure-ddos)
  - [Azure Network Security Groups(NSGs)](#azure-network-security-groupsnsgs)
  - [Just-in-Time VM Access](#just-in-time-vm-access)
  - [VM Antimalware agent](#vm-antimalware-agent)
  - [Storage Account Access](#storage-account-access)
  - [Azure Advanced Threat Protection(ATP)](#azure-advanced-threat-protectionatp)
- [Azure Security Services](#azure-security-services)
  - [Azure Active Directory](#azure-active-directory)
  - [Azure AD User MFA(Multi-Factor Authentication)](#azure-ad-user-mfamulti-factor-authentication)
  - [Azure Subscription](#azure-subscription)
  - [Azure Policies and Initiatives](#azure-policies-and-initiatives)
    - [Policies](#policies)
    - [Initiatives](#initiatives)
  - [Azure built-in RBAC roles](#azure-built-in-rbac-roles)
  - [Azure Resource Tagging](#azure-resource-tagging)
  - [Azure Resource Locking](#azure-resource-locking)
- [Monitoring the Azure Environment](#monitoring-the-azure-environment)
  - [Monitoring the Azure Environment](#monitoring-the-azure-environment-1)
  - [Custom dashboards](#custom-dashboards)
  - [Azure Cost management](#azure-cost-management)
  - [Azure Total Cost of Ownership (TCO) Calcultor](#azure-total-cost-of-ownership-tco-calcultor)
  - [Billing Alerts](#billing-alerts)
  - [Azure Support Plans](#azure-support-plans)
  - [Submit an Azure Support Ticket](#submit-an-azure-support-ticket)

## Azure Ecosystem

### Azure Data Centers

- the phychical facilities of Azure cloud computing
- Data Center Components
  - HVAC- Heating and Ventilation and Air Conditioning
  - Equipment racks
  - Hypervisor servers
  - Storages arrays
  - Routers, switches, UPSs, generators
- Data Center Physical Security
  - Fencing, alarms, guards
  - **Mantrap** doors, logged entry and exit(opens a second inner door only after an outer door closes)
  - Employee background checks
  - Locked rooms
  - Locked equipment racks

### Azure Regions or location

- **Availability Zones(AZs)**
  - One or more data centers with high-speed network links
- **Region/location**
  - Geograhical location consisting of one or more AZs(normally at least three)
  - Charactoristic
    - Geographical
    - 54 regions, 140 countries
    - Undisclosed Azure government regions
- Azure Service Availability
  - Varies by region
  - Examples
    - Azure Search - not in Canada East
    - G-series VMs = not in Central US

#### Azure Availablity Zones

- One or more data centers
- fault domains
- update domains: planned, maintained
- operated by portal

### Azure Portal

- GUI management: https://portal.azure.com/
  - create and manage Azure resources
  - create, edit, import, download AEM templates(JSON)
  - tag resources
  - search for resources
  - Azure cloud shell(Bash shell, PowerShell, Nodejs, java, python, Azure file share storage)
- RBAC(Role Based Access Control) self-provisiong
  - can give other administrators limited access to manage specific resources

### Azure CLI

- [install and configuration](https://docs.microsoft.com/en-us/cli/azure/install-azure-cli-windows?view=azure-cli-latest)
- then run az command from either Windows Command Prompt or PowerShell
- `az --version`
- `az --help`
- `az vm --help`
- `az login`
- `az vm list`
- `az vm `

### Azure Cloud Shell CLI
### Azure Powershell

- PowerShell is a cross-platform task automation and configuration management framework, consisting of a command-line shell and scripting language
- https://docs.microsoft.com/en-us/powershell/azure/?view=azps-4.1.0
- install options
  - `install-module -name az -allowclobber`  - in PowerShell of windows, MacOS or even Linux
  - `apt-get install`  - in linux
- Cmdlets(PowerShell Commands) formats: **verb-noun + parameter**
  - `Get-Help Connection-AzAccount -detail`
  - `Get-Command Az.compute -Module`
  - `Get-Module *az.* -list`
  - `Connect-AzAccount`
  - `get-command -module az.compute | more`

CommandType |Name| Definition
-----------|----|----------
Cmdlet|Get-Service|`Get-Service [[-Name] <String...`
Cmdlet|New-Service|`New-Service [-Name] <String>...`
Cmdlet|Restart-Service |`Restart-Service [-Name] <Str...`
Cmdlet|Resume-Service| `Resume-Service [-Name] <Stri...`
Cmdlet|Set-Service|`Set-Service [-Name] <String>...`
Cmdlet|Start-Service|`Start-Service [-Name] <Strin...`
Cmdlet|Stop-Service|`Stop-Service [-Name] <String...`
Cmdlet|Suspend-Service | `Suspend-Service [-Name] <Str...`

[back to top](#top)

## Storage Components

### Types of Azure Disk storage

- use **.VHD(Virtual** hard disk file in VM)
- or use standard HDD,SSD
- or use Ultra and premium SSD

**IOPS-** Input and Output Operations per Second

### Configure Azure Disk Storage

### Azure Blob Storage

- **BLOB-** Binary Large OBjects
- used as unstructured data storage
- take snapshots
- storage tier
  - **cool** storage tier -> not frequent access
  - **hot** storage tier -> optimized for frequent access
- BLOBs Types, all over accessible through http/https
  - Block BLOBs
    - used for small and large files
    - multiple block BLOBs can be uploaded concurrently
    - useful for storage of picture, office productivity documents
  - Page BLOBs
    - used for large file cloud storage
    - designed for random read and write access
    - useful for .VHD files
  - Append BLOBs
    - Designed so that new data can only by added to the end of the existing BLOB
    - existing blocks cannot be updated or deleted
    - useful for logging
- BLOB Hierarchy
  - Storage account: sa123   -> http://sa123
    - BLOB container: pics       -> http://sa123.blob.core.windows.net/pics
      - BLOB: pic1.jpg             -> http://sa123.blob.core.windows.net/pics/pic1.jpg

### Create a storage account
### Azure BLOB storage management

`get-command-*storageaccount*`

1. Azure GUI management: portal
2. Azure CLI management
   1. create a storage account -> `az storage account create -n stor2020 -g rg1 -l canadaeast --sku "Standard_LRS"`
   2. view                     -> `az storage account list | find "name"`
   3. view keys                -> `az storage account keys list --account-name stor2020 --resource-group rg1 --output table`
   4. create a container       -> `az storage container create --name pics --account-name stor2020 --account-key xxxxxxx`
   5. upload blobs             -> `az storage blob upload --container-name pics --name mypicture.jpg --file c:\samplefiles\mypicture.jpg --account-name stor2020 --account-key xxxxxxx`
3. PowerShell management
   1. `new-azstorageaccount -resourcegroupname rg1 -name stor2020 -locatition canadaeast -skunam "standard_lrs"`
   2. `get--azstorageaccount`
   3. `$ctx=get-azstorageaccount -r rg1 -name stor2020` -> define a variable, then we can use `$ctx.context` instead of `get-azstorageaccount -r rg1 -name stor2020`
   1. `new-azstoragecontainer -name "pics" -context $ctx.context`
   2. `set-azstorageblobcontent -file c:\samplefiles\mypicture.jpg -container pics -blob mypicture.jpg -context $ctx.context`

### Azure files and Azure file Storages

- Characteristic
  - Cloud-based file shares
  - SMB access  -> Server Message Block protocol
  - Mountable from the cloud or on-promises
- Tools: Azure Portal, Azure CLI, Azure Powershell
- Presequ
  - require an Azure storage account
  - provide a share name and quota(size limit)
  - SMP access requires TCP port 445 connectivity
  - From Windows
    - Driver letter
    - UNC path
    - Mount point path

### Azure Key Vault

- Secure secret storage: crytograhic keys, PKI certificates, password
- Backed by FIPS 1402-2 level 2 HSM
  - hardware security module
  - HSM device is a firmware device that is used at certain standard
- your existing HSM keys can be imported
- Steps
  - create key vault
  - create or upload secrets
    - secrets types: PKI certificate, Password
  - configure apps to retrieve secrets from key vault
    - GUI in portal
    - `(get-azkeyvaultsecret -vaultname kv2020 -name secret1).secretvaluetext` in Azure CLI
    - `az keyvault secret show --name secret1 --vault-name kv2020 `in Azure powerShell

[back to top](#top)

## Network Components

### Software Defined Networking(SDN)

### Azure Virtual Networks(Vnets)

- Network definition in the Azure cloud
- Software defined networking
- Managed via the portal, CLI or Powershell
- How to determination deployment
  - Vnet location(region)
  - IPv4 CIDR notation
    - 10.1.0.0/16,
    - 10.1 -> network of this Vnet
  - Firewalls and DDos protection
  - VNets contain subnets
- Advantages
  - Isolate deployed Azure resources
  - VNets can link to other VNets(peering)
  - VNets can link to an on-premised networdk
  - VNet DNS can be customized
  - Private and public IP address
- Azure Virtual Subnets
  - are assigned a NSG and route table
  - Subnet IP address range must fall within the parent VNet range
  - Subnet IP address range can be changed at any time

### Azure Virtual Networks Management

- GUI
- CLI command
  - `az network vnet --help`
  - `az network vnet create --help`
  - `az network vnet create -g rg1 -n EastVnet2 --address-prefix 14.1.0.0/16 --subnet-name Subnet1 --subnet-prefix 14.1.1.0/24`
  - `az network vnet list | find "name"`
- PowerShell cmdlets
  - `$vnet=new-azvirtualnetwork -resourcegroupname rg1 -location canadaeast 0name EastVnet3 -addressprfix 15.1.0.0/16`
  - `$subnet=add-azvirtualnetworksubnetconfig -name Subnet1 -addressprefix 15.1.1.0/24 -virtualnetwork $vnet`
  - `$vnet|set-azvirtualnetwork`

### Azure IP addressing

- Allow different service to communicate
- Types - Public/Private address
  - Public address
    - IPv4 or IPv6
    - static and dynamic allocation
    - allows incoming/outgoing internet connection
    - Public IPv6 - public-facing load balances only
  - Private address
    - IPv4 or IPv6
    - static and dynamic allocation
    - Allocated or set from the Vnet subnet IP range
    - used within a VNet or VPN/ExpressRoute
- Allocation - Dynamic/Static IP address
  - Dynamic IP address
    - IP address is released when resource is stopped or deleled(Such as VM stop/start)
    - Useful when the IP address does not have to remain the same
  - Static IP address
    - IP address stays with the resource until it is deleted
    - Useful when the IP address must remain the same
    - Static IPs are assigned by azure from an address pool

### Azure VPN Gateway

- Encrypted tunnel between two endpoints
  - Vnet to Vnet
  - On-premises network to Vnet
- need to define gateway subnet in Azure virtual network
  - the subnet must be named 'GatewaySubnet'
  - two VMs which not directly manageable
  - or don not deploy additional resources to the gateway subnet
- Types
  - Point-to-point
    - SSTP an IPsec protocol
    - VPN device not required
    - Single device VPN connection
    - Useful for travelling users
      - Secure access to Azure
  - Site-to-site
    - IPsec protocol
    - On-premise to Vnet
      - need VPN device
      - Windows RRAS
      - Public-facing IPv4 address
    - no VPN device if it is Vnet to Vnet
- Configuration
  - Point-to-site
    1. create a gateway subnet
    2. create Virtual network gateway
    3. PKI certificate   <- client connect to point-to-site VPN need PKI authenticate
    4. ...

### Azure Application Gateway

- Load balanceer for web application traffic
- difference with traditional load balance
  - traditional load balance -> traffic is routed based on **IP address and port**
  - Azure application gateway -> trafic routing based on **URL**
- Session affinity: can be used to maintain a user session on the same back-end server
- Web application Firewall(WAF)
  - Available through the Azure application gateway
  - Firewall designed to block web application exploits
    - cross-site request forgeries
    - directory traversal
    - cross-site scripting
    - SQL injection
- Configuration

### Content Delivery Networks(CDNs)

- a strategy we can employ in Azure to make sure that contet is available to users locally
- cache content of Geographical POP(Point Of Presence) servers, Speed up end-user content delivery experience
- Features
  - Geo-filtering
  - Content compression
  - Caching rules:
  - Site acceleration
  - HTTPS custom domains
- Price tier
  - Standard Microsoft:
    - did not support dynamic site accelertion
    - did not support mobile device rules
  - Standard Verizon: support dynamic site accelertion
  - Standard Akamai:  support dynamic site accelertion
  - Premium Verizon:  support dynamic site accelertion

[back to top](#top)

## Azure Virtual Machine

- Rapid Provisioning
- Windows and Linux
- Usage fees:
  - VM size: vCPU, RAM and disk IOPS
  - Amount of time running
- Consideration
  - VM size
  - Azure region in which VM will be deployed
  - VM OS and data disks
  - VM extension(agents): security, backup, script support
  - Azure subnet into which VM will be deployed and IP address
  - Specify logon credentials
  - Connect using Remote Desktop Protocol(RDP)
  - Ensure firewall allow RDP
  - VM availability sets for high availability
    - VMs in the set do not have to be identical
  - VM backup
- Linux VM
  - Username/password authentication
  - Public key authentication
  - Connect using Secure Shell(SSH)
  - Ensure firewalls allow SSH
  - VM availability sets for high availability
  - VM backup
- Windows VM
- Azure Virtual Machine Control
  - IaaS Vms
    - Deployed manually
    - Full configuration control
  - Managed Vms
    - Deployed automatically when you deploy a higher level service such as SQL
    - Limited configuration control
- Deployment/Management method
  - Azure Portal
  - Azure Powershell
  - Azure CLI
  - ARM template
  - RESTAPIs and client SDKs

### Windows VM Deployment
### Linux VM Deployment

### Connect to Azure VM

[back to top](#top)

## Database Solutions

### Azure SQL Database

- Database as Service(DBaaS, PaaS)
  - *.database.windows.net
  - unique server and dataname
  - remove unused databases/server to reduce charges
- is managed service
- Bring your Own License(BYOL)
- Database server firewall enabled by default
  - can create a server firewall rule to allow inbound port 1433 traffic if needed
  - 'Add client IP'
- Scaling
  - Horizontal
    - Database replicas
    - Database sharding
  - Vertical
    - VM instance sizing
- Management
  - Azure CLI:  `az sql db create`
    - `az sql --help`
    - `az sql server create --name sqlsvr456 --resource-group rg1 --location canadaeast --admin-user cirving --admin-password Pa$$dsf`
    - `az sql db create --resource-group rg1 --server sqlsvr456 --name db456`
    - `az sql server firewall-rule create --resource-group rg1 --server sqlsvr456 -n AllowInboundSQL --start-ip-address 71.7.176.108 --end-ip-address 71.7.176.108`
  - Azure PowerShell: `New-AzSqlDatabase`
    - `Connect-AzAccount`
    - `New-AzSqlServer -ResourceGroupName rg1 -ServerName sqlsrv3362 -Location canadaeast -SqlAdministratorCredentials $(New-Object -TypeName System.Managment.Automation.PSCredential -ArgumentList "cirving", $(ConvertTo-SecureString -String "Pa$$dsf" -AsPlainText -Force))`
    - `New-AzSqlDatabase -ResourceGroupName rg1 -ServerName sqlsrv3362 -DatabaseName db112`
    - `New-AzSqlServerFirewallRule -ResourceGroupName rg1 -ServerName sqlsrv3362 -FirewallRuleName "AllowIncoming SQL" -StartIpAddress 71.7.176.108 -EndIpAddress 71.7.176.108`
  - ARM template: `Microsoft.sql/Servers`
- On-promise connect through Microsoft SQL Server Management Studio

[back to Database Solutions](#database-solutions)

### Azure Database Migration Service

- Migration Service
  - Moving database workloads from on-promises into Azure cloud
  - move data through a site-to-site VPN or an ExpressRoute circuit
- Migration Process:
- Migration Assessment tool: Microsoft Data Migration Assistant(on-promise software)

### Azure SQL Geo-Replication

### NoSQL

- Characteristics
  - High performance and availability
  - Each row can stored different types of data
  - Store types: key-value, document, graph
- Scaling
  - Horizontal: clustering, load balancing replication
- Azure NoSQL Products
  - Azure CosmosDB
  - Azure redis memeory caching
  - Azure marketplace NoSQL options

### CosmosDB

- Characteristics
  - NoSQL database solution
  - Globally distributed across Azure regions
  - support default encryption of data at rest
- requires an Azure CosmosDB account(Name)
- API selection(account) dtermints account type
  - Core(SQL)
  - Azure Cosmos DB for MongoDB API
  - Cassandra
  - Azure Table
  - Gremlin(graph)
- Import data to CosmosDB:  SQL databases, csv files, JSON files, MongoDB

[back to top](#top)

## Big Data Analytics

- Clustering and parallel computing such as Apache Hadoop
- Large scale storage solutions such as NoSQL

### Azure SQL Data Warehouse

- Characteristics
  - Data storage
  - Parallel processing
  - Execute complex queries
  - Big data analytics
- Azure SQL Data Warehouse Architecture(components)
  - APP T-SQL commands ->
  - control node ->
  - compute nodes ->
  - underlying Azure storage
- DWUs(Data Warehouse Units) - performance level
  - combination of performance factors related to things like CPU computing power, the amount of memory and database input and output
- Need a server
- using firewall rules to control inbound traffic

### Azure HDInsight

- Characteristics
  - is big data **analytics** solution that's hosted in the cloud
  - considered as a managed service
  - allow for node clusters
- HDInsight underlying technologies
  - Apache Hadoop: Distributed processing clusters
  - Apache Spark: In-memory parallel processing
  - Apache Kafka: Real-time streaming data pipelines
- ETL(Extract, Transform, Load)
  - copy data from source
    - Transform to different format for consumption by target
      - put data into a data warehouse
- HDInsight usage
  - machine learning:
    - gain insights from vast amounts of data,
    - Predictive analysis, such as trends
  - IoT:
    - IoT Device telmetry
    - Draw conclusions from large datasets
- Delpoying

### Azure Data Lake Analytics

- **Large** sclew data storage
  - Petabytes(1PB = one million GB)
  - Trillions of files
- Data **analysis**
  - Data Lake Analytics Unit(DLAU)
  - one DLAU is 2 CPU cores and 6 gigabtypes RAM
- **Parallel** Processing
  - Node **clusters**
- Tools
  - Visual Studio IDE
  - Eclipse IED
  - IntelliJ IDE
- need **data lake storage account**
- Azure Data Lake Storage
  - Apache Hadoop cluster can draw data
  - Hadoop Distributed File System(HDFS)
  - Analysis jobs use **U-SQL** (Large-scale data analysis language)

### Azure Databricks

- Based on Apache Spark, a distributed cluster-computing framework
- Run and process a dataset on many computers simultaneously.
- provides all the computing power
- integrates with other Azure storage services

[back to top](#top)

## Internet of Things(IoT)

- Wide variety of devices that communicte over internet
- IoT and security
  - Consumer grade IoT devices
    - Firmware is not updatable
    - security is not a prority
  - change default settings
  - Place on isolated and secured network

### Azure IoT Central

- is centrally managed service
- is seperated Azure resource that we deployed
- *.azureiotcentral.com
- centralized IoT device management and monitoring

### Azure IoT Hub

- a separate type of Azure resource that you can deploy
- Azure IoT central uses an IoT Hub
  - The IoT Hub is not directly manageable in this case
- Centralized messaging reposity for IoT devices
- IoT devices must be connected to IoT hub
  - connection strings
    - device registration
    - device message transmission and receipt to and from IoT hub
- Usage
  - Medical device tracking
  - Industrial machinery control
  - Remote building HVAC(Heating Ventilation and Air Conditioning) control
- IoT Device Connection Protocols
  - Https, Tcp 443
  - AMQP, Tcp 5672: (Advanced Message Queuing Protocol) is a standard for IoT device transmission of data
  - MQTT, Tcp 1883: (Message Queuing Telmetry Transport)
- IoT Hub units determines IoT hHub scale capacities

### Azure IoT Edge

- is an IoT-based solution for Azure Cloud that allows us to have custom code running on IoT Services
  - Custom IoT software
  - Modules are deployed to IoT device
- Azure IoT Edge components
  - IoT hub: centally register IoT services and manage and monitor in Azure cloud
  - IoT devices
  - IoT Edge runtime:
    - needs to run in IoT services
    - an agent that allows us to push out our code modules or docker cmpatible containers that have our custom code onto IoT services
- IoT Edge Process
  - create IoT Hub in portal
    - register IoT device
      - Run IoT Edge runtimes on device
        - Deploy code to device

### Azure IoT solution Accelerators

- Pre-created IoT cloud solutuons
  - Custom code is already written
  - IoT device monitoring
  - Required Cloud IoT services are created automatically
- Use accelerators as
  - completed IoT cloud solutions
  - starting point
- Deploying
  - select accelerator from the website("try now")
  - IoT service simulators
  - Azure CosmosDB storage
  - Monitoring dashboard

### Azure Cognitive Services

- Imitation of human behavior by technology
  - Developer AI tools
  - Endpoint URL(https://xxx.dev.cognitive.microsoft.com) for making API calls
- use for speech, vision metadata tagging, language analysis, intelligent search
- Deploying in the portal

### Azure Machine Learning Studio workspace

- web-based tool
- Data analysis
  - source data must be trustworthy and accurate
- Predict future trends or outcomes
  - financial credit risks
  - most likely income based on marital status,education, city
  - Heart disease predition
- deploying process
  - sample or custom data
    - apply functions and learning algorithms
      - run the data experiment and then visualize the output

[back to top](#top)

## Azure Data Privacy

### Common Data Privacy Frameworks

- Purpose of Data Privacy Frameworks
  - how data collection
  - how data use
  - how data sharing with third party
- Personally Identifiable Information(PII)
  - Phone number, Credit number/history, social security numbr, Mother's maiden name, ...
- Protected Health Information(PHI)
  - Patient name
  - Medical discharge date
  - Medical payments
  - Past procedures
  - Drugs administered
  - ...
- Data transmitted into/out a country
- Some Data Privacy Frameworks
  - General Data Protection Regulation(GDPR)  <- **Azure is GDPR-compliant**
    - data privacy of European Union(EU)
    - data within EU
    - data exported outside of the EU
  - National Institute of Standards and Technology(NIST)
    - International
    - Cybersecurity Framework
    - focuses on critical infrastructure
    - Sensitive data hosted by a cloud provider
    - NIST SP 800-122: Guid to protecting the confidentiality pf Personally Identifiable Information(PII)
  - International Standards Organization(ISO)
    - ISO/IEC 27017:2015
    - Cloud computing security controls
      - Access control
      - Cloud tenant isolation
      - Cloud tenant data removal
- Procedure
  - Which data provacy laws/regulations affect the organization?
    - Incorporate data privacy into organizational security policies
      - Assign responsibility for compliance by compliance officer

### Azure security Center

- install agents
- ...

### Azure Service Trust portal

- use in
  - Compliance tracking
  - audit report
  - Data Protection
- Compliance manager
  - Remain compliant with data protection regulations
    - HIPAA, GDPR, ISO 27001
  - track compliance
  - Assign compliance responsibility
- Auditing
  - run audit report for compliance with standard related to ISO, PCI DSS, FeDRAMP, SOC
- Data protection in line with laws and regulations
  - Documentation
  - Data privacy framework to Azure security control mappings
  - FAQs
  - White papers

### Block Public SSH(linux) and RDP(windows) traffic

- remotely manage VM from on-premises
  - by default through a **public** IP address on each VM
  - if using Point to site VPN connection, through a **private** IP address, choose your VM
    - click "networking" ->
      - click "Effective security rules": you can check rule here
        - click "inbound security rules" on the left and delete rule "100 Port_22 22TCP"
      - click "xx.xx.xx.xx"(public IP) ->
        - click "Dissociate" on the top

### Azure Government Services

- U.S. Government
  - Department of Defense(DoD)
  - Federal agencies
  - State agencies
  - Municipal agencies
- Hybrid Cloud (with some government agency data centers can be extend to Azure cloud)
- Seperate data centers located in U.S.
- Types of connected devices that can be related to government use of the Azure government cloud
  - Traffic control
  - HVAC (Heating Ventilation and Air Conditioning for government agency facilities)
  - smart cities
  - Military sites
- Azure Government secret
  - DoD impact level 5
    - Controlled Unclassified Information(CUI)
    - National Security Systems(NSS)
  - Dedicated infrastructure
    - physical seperation from other cloud tenants
  - Non-classified Internet Protocol Router Network
    - NIPRNet
    - Private network

### Azure Germany Services

- German data trustee: T-system international
- Germany central and Germany Northeast
- DNS suffixes is different
  - *.database.cloudapi.de
- ExpressRoute circuits are supported
  - Azure only, not Office 365
- Axure Active Directory
  - microsoft accout sign-in does not work

### Azure PCI DSS Compliance

- PCI DSS is a security standard that applies to organizations that deal with cardholder data
- in Security Center
  - "Policy & Compliance"  -> " Regulatory compliance(Preview)

### Azure service Level Agreement(SLA)

- SLA are contract document between a service provider(Azure) and the service consumer
- there is an SLA for each different Azure service
- https://azure.microsoft.com/en-us/support/legal/sla/

### Azure Preview Features and General Availability(GA)

- GA features and APIs are covered by Azure SLAs
- For developer solutions, preview code may require changes before upgrading to GA, because preview code be moved if preview go to GA

[back to top](#top)

## Azure Secure network connectivity

- Defense in depth
- Azure Firewall
- Azure DDoS mitigation
- Network security groups(NSG)

### Azure Firewall

- Azure firewall is a cloud managed resource that can control inbound and outbound traffic to and from Azure
- Azure firewall need associated with Azure Vnet subnets
  - other Vnets can connect in a hub and spoke fashion
  - requires a subnet named **AzureFirewallSubnet**, which treated as virtual appliance
- Azure firewall has a **static public IP address**
- Rules: control traffic flow, can create firewall, network and application rules to control in and outbound traffic
  - NAT rules
    - Allow inbound access to Azure services
      - On-premises network
      - Internet
    - TCP and UDP
    - Destination Network Address Translation(DNAT)
      - IP an port public to private translation
    - Priority value determines order of rule execution
    - Rule are placed into a **collection**, for example DNAT
  - Network rules
    - TCP, UDP, ICMP, Any
    - Source and destination IP address
    - Destination Port
    - Userful to allow communication between subnets
    - Allow or deny actions
  - Application Rules
    - outbound connectivity
    - specify Fully Qualified Domain Names(FQDNs), such as *.domain.com or *
    - Protocol:port, such as HTTPS:443
    - Allow or deny actions, such as white list of FQDNs
    - need to create a **route table**(Azure Object) resource(which associated with Azure Vnet subnets) to control **outbound** traffic based FQDNs
- alert: threat intelligence can alert on and deny traffic
- Configure Azure firewall
  - open a Virtual networks -> create a subnet called **AzureFirewallSubnet**
  - create a firewall       -> Public IP address name is needed
  - create a route Table
    - associate route to subnets:  "Subnets" -> "Associate"
    - create a route:              "Routes" -> "Add"
  - Add rules in firewall:
    - open a firewall u created -> "Rules" -> "Add application rule collection"

### Azure DDoS

- Distributed Denial of Service(DDoS) is attach where an attacker send commands to multiple machines to attack a victim host or victim network
- "Basic" protection is enabled automatically at no cost
- "Standard"
  - Configured in Vnet properties
  - Adaptive tuning based on deployed VNet resources
  - you will get alerts when there is DDoS attack

### Azure Network Security Groups(NSGs)

- NSG is a resource that can be associated with NICs, subnets
  - Network Interface Cards(NICs) is used by an Azure VM so to control traffic into and out of that VM
- NSG can create
  - **inbound** network security rules: such as associated with subnets
  - **outbound** network security rules
- Each rule has a priority value
- Allow and Deny actions: traffic can be allowed or denied
- Default rules
  - Load balancing
  - Inter-VNet communication
  - Incoming Internet traffic is blocked
  - Outbound Internet traffic is allowed by default
- Management tools
  - Azure Portal
      1. create a Network security group
      2. go to "inbound security rules" -> click "Add"
      3. go to "Subnet" -> "asscociate"
  - PowerShell
    - `new-AzNetworkSecurityGroup -name Linux_NSG -resourcegroupname RG1 -location canadaeast`
    - `Get-AzNetworkSecurityGroup | select name`
    - `Get-AzNetworkSecurityGroup -name linux_nsg -resourcegroupname rg1 | add-AznetworkSecurityRuleConfig -name AllowSSH -access aloww -protocol tcp -direction inbound -priority 220 -sourceaddressprefix * -sourceportrange * -destinationaddressprefix * -destinationportrange 22 | set-AzNetworkSecurityGroup`
    - `Remove-AzNetworkSecurityGroup`
  - CLI
    - `az network nsg create --help`
    - `az network nsg create -g Rg1 -n windows_NSG`
    - `az network nsg list | find "name"`
    - `az network nsg rule create -g Rg1 --nsg-name windows_NSG --priority 200 --source-address-prefixes * --destination-address-prefixes * --destination-port-ranges 443 --direction inbound --access Allow --protocol tcp --name "AllowInboundHTTPS`
    - `az network nsg rule list --resource-group Rg1 --nsg-name windowns_NSG`
    - `az network nsg delete`
- Configure a VM Jump Box
  - remote connections to other internal azure resources

### Just-in-Time VM Access

- reduce inbound remote management traffic
- enter any VM -> Configuration blade -> 'Enable just-in-time policy' -> 'open Azure Security center' -> select this VM -> 'Request access'
- Azure Security Center

### VM Antimalware agent

- enter any VM -> Extensions -> add -> choose 'Microsoft Antimalware" from list -> ...

### Storage Account Access

Setup a limited access to storage account from specific Vnet subnet and from a specific on-promise client IP address

1. enter a storage account on portal ->
2. "firewalls and virtual networks of storage account" ->
3. "Allow access from" -> choose "Selected networks" ->
4. "Address Range"  -> ...

### Azure Advanced Threat Protection(ATP)

- ATP provides protectio against security threats to Azure resources
  - Monitoring and alerts
  - Protection
  - Identify anomalies
  - Azure ATP reports
- Types
  - Pass the hash
  - Enumeration of SMB sessions
  - ENumeration of active directory
  - Encryption downgrades
  - DNS reconnaissance
- Requirement
  - ATP license: ATP licensing is automatic when you create an Azure subscription
  - Manged through the ATP portal(https://portal.atp.azure.com)
  - Connects to tan monitors active directory
    - Azure ATP sensor

[back to top](#top)

## Azure Security Services

### Azure Active Directory

- Managed service: No need to manually deploy domain controllers
- contains
  - Users
  - groups
    - Group types: security, Office 365
  - Applications
  - Devices
- Features
  - Azure AD join
  - Azure AD Domain services
  - Azure AD Connect
- Setting

### Azure AD User MFA(Multi-Factor Authentication)

### Azure Subscription

-
- One Azure account, multiple subscriptions
- Billing occurs seperately for each subscription
- Trial can be converted to paid(subscription)

### Azure Policies and Initiatives

#### Policies

- Applied to subscriptions, resource groups, or management groupa
- More granular than RBAC
- Built-in policies
  - allow us to control resource deplomyment by region/type
  - SQL Server version check
- Custom policies
  - getting Internet repositories
  - Manual creation policies
  - Copy existing policy
  - JSON syntax
- Policy parameters
- Policy assignment
  - Scope
    - Resource group
    - management Group
    - Azure subscription
  - Permissions are inherited by child objects
    - exclusions are permitted
  - Policy effects
    - Deny
    - Append
    - DeployIfNotExists
    - AuditIfNotExists

#### Initiatives

- Group similar policies together

### Azure built-in RBAC roles

- create custom role by using CLI
  - `az login`
  - `az role definition create --role-definition d:\mycustomrole.json`
  - `az role definition list --custom-role-only true  | find "rolename"`

```json
{
  "Name": "The Overseer",
  "IsCustom": "",
  "Description": "Subscription-level viewing.",
  "Actions": ["*/read"],
  "NotActions": [ ],
  "AssignableScopes": ["/subscriptions/00da78ac-9d0e-427b-80da-e1b07c749f72"]
}
```

- checking custom role by using portal
  - "subscriptions" ->
  - "Access control(IAM)" blade
  - "Azure active directory" ->
  - "user" blade

### Azure Resource Tagging

### Azure Resource Locking

- Locks blade in VM
- resource Group locks using CLI
  - `az lock create --name Rg1Lock --lock-type CanNotDelete --resource-group Rg1`
  - `az lock list`
  - open resource group -> Locks blade
  - `az lock show --name Rg1Lock --resource-group Rg1 --output tsv --query id`
  - `az lock delete --ids xxxxx`, xxxx is name that up cli result
- resource Group locks using PowerShell
  - `New-AzResourceLock -LockName Rg1NoDelete -LockLevel CanNotDelete -ResourceGroupName rg1`
  - `Get-AzResourceLock`
  - `$lockId = (Get-AzResourceLock -ResourceGroupName rg1).LockId`
  - `Remove-AzResourceLock -LockId $lockId`

[back to top](#top)

## Monitoring the Azure Environment

### Monitoring the Azure Environment

- Azure Resource Activity Log
  - VM -> overview
  - VM -> Activity Log
    - filter type
  - VM -> Metrics
  - VM -> Alerts
    - Resource,
    - condition,
    - action group
  - Storage account -> Activity Log
  - Storage account -> Metrics
  - ...
- Azure performance Diagnostics
  - is a Windows VM extension
  - stored in a storage account
  - left for 30 days as a zip file
- Azure Application insights
  - Web app monitoring

### Custom dashboards
### Azure Cost management

- can use in
  - Monthly operational expense: Cloud computing
  - Budgeting
  - Billing alerts
  - Set spending limits
  - Resourct tagging
- Azure Pricing Calculator
  - https://azure.microsoft.com/en-ca/pricing/calculator/
  - Add Axure resource types ->
    - specify details ->
      - View cost estimate
- usage
  - Configure VM automatic shutdown
  - Review VM sizing
  - Confgure autoscaling scale-in
  - VM reserved instances
- XLS:  file format when downloading an Azure cost estimate
- Sample- reduce Azure virtual machine charges
  - change the instance type
  - Configure public IP addresses
- https://docs.microsoft.com/en-us/azure/cost-management-billing/

### Azure Total Cost of Ownership (TCO) Calcultor

- TCO helps you estimate the potential cost savings you could achieve by migrating your application workloads to Microsoft Azure
- https://azure.microsoft.com/en-ca/pricing/tco/calculator
- Define your workloads ->
  - Adjust assumptions ->
    - View report

### Billing Alerts

- subscription ->
- select your subscription and click "Manage" tab, will nav to new URL ->
- "subscription" tab ->

### Azure Support Plans

- catogories
  - Development
  - Production workloads
- Item
  - Techincal
  - support
  - Response times
  - Operations support
  - Training
- types
  - Basic -> no tech support
  - Developer -> business time tech support
  - Stardard -> 24/7 tech support
  - Professional Direct
  - Premier

### Submit an Azure Support Ticket

- Service and subscription limits(quotas)
- Billing
- Subscription management
- Technical
- https://docs.microsoft.com/en-ca/azure/azure-resource-manager/management/azure-subscription-service-limits

[back to top](#top)

- webapp1vm1, Honggzb871013
- webapp1vm2, Honggzb871013
- https://docs.microsoft.com/en-us/learn/certifications/exams/az-900
- https://skillsoft.sharepoint.com/:f:/s/LiveBootcamp/Evu9N4MKiMBJnOKe1BVP0LQBm-QjcKZmaUUT6we_1v1tiA?e=DErrcS
- https://azure.microsoft.com/en-ca/support/legal/sla/
- https://www.mindhub.com/az-900-microsoft-azure-fundamentals-microsoft-official-practice-test/p/MU-AZ-900?utm_source=microsoft&utm_medium=certpage&utm_campaign=msofficialpractice
- https://azure.microsoft.com/en-us/features/storage-explorer/
- https://share.percipio.com/cd/IqCRr8b6U


- Survey
  - https://skillsoft.ca1.qualtrics.com/jfe/form/SV_ehUsWTFfVMz4mEd
- SharePoint Resources:
  - https://skillsoft.sharepoint.com/:f:/s/LiveBootcamp/Evu9N4MKiMBJnOKe1BVP0LQBm-QjcKZmaUUT6we_1v1tiA?e=DErrcS
- MS Links
  - hhttps://azure.microsoft.com/free/
  - hhttps://docs.microsoft.com/en-us/learn/certifications/exams/az-900
  - hhttps://azure.microsoft.com/en-ca/overview/trusted-cloud/compliance/
  - hhttps://docs.microsoft.com/en-ca/learn/certifications/browse/?products=azure
  - hhttps://www.microsoft.com/en-us/download/details.aspx?id=53595
  - hhttps://azure.microsoft.com/en-ca/pricing/calculator/
- Practice
  - https://www.mindhub.com/az-900-microsoft-azure-fundamentals-microsoft-official-practice-test/p/MU-AZ-900?utm_source=microsoft&utm_medium=certpage&utm_campaign=msofficialpractice
