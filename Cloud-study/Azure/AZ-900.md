[AZ-900 certificate](#top)

- [Azure management tools](#azure-management-tools)
  - [Azure Portal](#azure-portal)
  - [Azure CLI](#azure-cli)
  - [Azure Powershell](#azure-powershell)
- [Module 1: Cloud Concepts(15-20%)](#module-1-cloud-concepts15-20)
  - [Cloud Computing Considerations](#cloud-computing-considerations)
  - [Cloud computing terms(Exam tips)](#cloud-computing-termsexam-tips)
  - [Economies of scale](#economies-of-scale)
  - [Cloud Architect Models](#cloud-architect-models)
  - [Types of Cloud Services Models](#types-of-cloud-services-models)
- [Module 2: Core Azure Services(30-35%)](#module-2-core-azure-services30-35)
  - [Core Azure architectural components](#core-azure-architectural-components)
    - [Azure Regions/location](#azure-regionslocation)
    - [Region Pairs](#region-pairs)
      - [Feature(Azure service) Availability](#featureazure-service-availability)
    - [Geographies](#geographies)
    - [Azure Data Centers](#azure-data-centers)
    - [Availability Options](#availability-options)
      - [Azure Availability Sets](#azure-availability-sets)
      - [Azure Availablity Zones(AZs)](#azure-availablity-zonesazs)
    - [Azure Resource Groups](#azure-resource-groups)
    - [Azure Resource Manager(ARM)](#azure-resource-managerarm)
  - [Azure Compute Service](#azure-compute-service)
    - [Visual Machine(VM)](#visual-machinevm)
    - [Virtual machine Scale Sets](#virtual-machine-scale-sets)
    - [Azure Container Instances](#azure-container-instances)
      - [Migrate apps to containers(microservice architecture)](#migrate-apps-to-containersmicroservice-architecture)
    - [Azure App Service](#azure-app-service)
    - [Azure Functions](#azure-functions)
    - [Serverless compute](#serverless-compute)
  - [Azure network services](#azure-network-services)
    - [Azure Virtual Networks(Vnets)](#azure-virtual-networksvnets)
    - [Azure Virtual Networks Management](#azure-virtual-networks-management)
    - [Azure IP addressing](#azure-ip-addressing)
    - [Load Balancer](#load-balancer)
    - [Azure VPN Gateway](#azure-vpn-gateway)
    - [Azure Application Gateway](#azure-application-gateway)
    - [Content Delivery Networks(CDNs)](#content-delivery-networkscdns)
  - [Azure Storage Services](#azure-storage-services)
    - [Azure data categories](#azure-data-categories)
    - [Azure Blob Storage](#azure-blob-storage)
    - [Azure BLOB storage management](#azure-blob-storage-management)
    - [Azure Disk Storage](#azure-disk-storage)
    - [Azure File storage](#azure-file-storage)
    - [Azure Archive Storage](#azure-archive-storage)
    - [Azure Key Vault](#azure-key-vault)
  - [Azure Database Service](#azure-database-service)
    - [Cosmos DB](#cosmos-db)
    - [Azure SQL Database](#azure-sql-database)
    - [MySQL](#mysql)
    - [PostgreSQL](#postgresql)
    - [Database Migration Services](#database-migration-services)
  - [Azure Solutions](#azure-solutions)
    - [Internet of Things(IoT)](#internet-of-thingsiot)
      - [Azure IoT Central(SaaS)](#azure-iot-centralsaas)
      - [Azure IoT Hub(PaaS)](#azure-iot-hubpaas)
      - [Azure IoT Edge](#azure-iot-edge)
      - [Azure IoT solution Accelerators](#azure-iot-solution-accelerators)
    - [Big Data and Analytics](#big-data-and-analytics)
      - [Azure Synapse Analytics](#azure-synapse-analytics)
    - [Ariificial Intelligence](#ariificial-intelligence)
    - [Serverless Computing](#serverless-computing)
    - [DevOps(Development and Operations)](#devopsdevelopment-and-operations)
    - [Azure App Service](#azure-app-service-1)
- [Module 3: Security, Privacy, Compliance and Trust(25-30%)](#module-3-security-privacy-compliance-and-trust25-30)
  - [Azure Secure network connectivity](#azure-secure-network-connectivity)
    - [Azure Firewall](#azure-firewall)
    - [Network Security Group(**NSG**)](#network-security-groupnsg)
    - [Application Security Groups(ASG)](#application-security-groupsasg)
    - [Azure network security solutions](#azure-network-security-solutions)
  - [Core identity services](#core-identity-services)
    - [Azure Active Directory(AAD) Service](#azure-active-directoryaad-service)
    - [Azure Multi-Factor Authentication(MFA)](#azure-multi-factor-authenticationmfa)
  - [Security tools and features](#security-tools-and-features)
    - [Azure Security Center](#azure-security-center)
    - [Key Vault](#key-vault)
    - [Azure Information Protection(AIP)](#azure-information-protectionaip)
    - [Azure Advanced Threat Protection(ATP)](#azure-advanced-threat-protectionatp)
  - [Azure Sentinel](#azure-sentinel)
  - [Azure governance methodologies](#azure-governance-methodologies)
    - [Azure policy](#azure-policy)
    - [Azure Role-Based Access Control(RBAC)](#azure-role-based-access-controlrbac)
    - [resource locks](#resource-locks)
    - [Explore Azure blueprints](#explore-azure-blueprints)
    - [subscription governance](#subscription-governance)
  - [monitoring and reporting](#monitoring-and-reporting)
    - [Tags](#tags)
    - [Azure Monitor](#azure-monitor)
    - [Azure service health](#azure-service-health)
    - [Monitoring applications and services](#monitoring-applications-and-services)
  - [privacy, compliance, and data protection](#privacy-compliance-and-data-protection)
  - [Privacy, Compliance and Trust](#privacy-compliance-and-trust)
    - [Governance](#governance)
    - [Azure Monitor](#azure-monitor-1)
    - [Azure Service Health](#azure-service-health-1)
    - [Compliance](#compliance)
    - [Privacy](#privacy)
    - [Trust](#trust)
- [Module 4: Microsoft Azure pricing, service level agreements, and lifecycles(20-25%)](#module-4-microsoft-azure-pricing-service-level-agreements-and-lifecycles20-25)
  - [Subscriptions](#subscriptions)
  - [management groups(Organization Structure)](#management-groupsorganization-structure)
  - [Purchase Azure products and services](#purchase-azure-products-and-services)
  - [Azure Pricing Calculator](#azure-pricing-calculator)
  - [Total Cost of Ownership Calculator(TCO)](#total-cost-of-ownership-calculatortco)
  - [Minimizing costs](#minimizing-costs)
  - [Azure Cost Management](#azure-cost-management)
  - [Planning and managing Azure costs](#planning-and-managing-azure-costs)
    - [Pricing Factor](#pricing-factor)
    - [Spending Limits && Quotas && Tags && Reserved Instances && Advisor](#spending-limits--quotas--tags--reserved-instances--advisor)
  - [Support](#support)
    - [Plans](#plans)
    - [Tickets](#tickets)
    - [Other Support Channels](#other-support-channels)
    - [Knowledge Center](#knowledge-center)
  - [Open a support request](#open-a-support-request)
  - [Service Level Agreements(SLA)](#service-level-agreementssla)
  - [Service Lifecycle](#service-lifecycle)
    - [Azure Preview](#azure-preview)
    - [Azure updates](#azure-updates)

## Azure management tools

### Azure Portal

- GUI management: https://portal.azure.com/
- create and manage Azure resources
- create, edit, import, download AEM templates(JSON)
- tag resources
- search for resources
- Azure cloud shell(Bash shell, PowerShell, Nodejs, java, python, Azure file share storage)

### Azure CLI

- [install and configuration](https://docs.microsoft.com/en-us/cli/azure/install-azure-cli-windows?view=azure-cli-latest)
- then run az command from either Windows Command Prompt or PowerShell
- `az --version`
- `az --help`
- `az vm --help`
- `az login`
- `az vm list`
- `az vm `

### Azure Powershell

- PowerShell is a cross-platform task automation and configuration management framework, consisting of a command-line shell and scripting language
- https://docs.microsoft.com/en-us/powershell/azure/?view=azps-4.1.0
- install options
  - `install-module -name az -allowclobber`  - in PowerShell of windows, MacOS or even Linux
  - `apt-get install`  - in linux
- Cmdlets(PowerShell Commands) formats: **verb-noun + parameter **
  - `Get-Help Connection-AzAccount -detail`
  - `Get-Command Az.compute -Module`
  - `Get-Module *az.* -list`
  - `Connect-AzAccount`
  - `get-command -module az.compute | more`

CommandType |Name| Definition
-----------|----|----------
Cmdlet|Get-Service|`Get-Service [[-Name] <String...`
Cmdlet|New-Service|`New-Service [-Name] <String>...`
Cmdlet|Restart-Service |`Restart-Service [-Name] <Str...`
Cmdlet|Resume-Service| `Resume-Service [-Name] <Stri...`
Cmdlet|Set-Service|`Set-Service [-Name] <String>...`
Cmdlet|Start-Service|`Start-Service [-Name] <Strin...`
Cmdlet|Stop-Service|`Stop-Service [-Name] <String...`
Cmdlet|Suspend-Service | `Suspend-Service [-Name] <Str...`

- Azure Cloud Shell CLI
- Azure Mobile App
- Azure REST API
- https://azure.microsoft.com/en-us/resources/templates/
- Azure advisor

[back to top](#top)

---------------------------------------------------

## Module 1: Cloud Concepts(15-20%)

### Cloud Computing Considerations

- Cloud services that meet business needs
- On-premises system/data cloud migration
- Technical expertise of IT staff
- Total cost of ownership(TCO)
- Data privacy and lCloud-study/regulations

**BYOL**- allows cloud customers to reuse existing software licenses

### Cloud computing terms(Exam tips)

terms| explanation | meaning in Azure
---|---|---
High availability|to keep services up and running for long periods of time, while experiencing little to no downtime|VMs can spin up fast to help processs requests Scalability|to increase or decrease resources for a given workload|scaling out(add resources to service a workload) or scaling up(add additional capabilities to handle increases in demand)
Elasticity| to automatically or dynamically increase/decrease resources as necessary|to quickly increase/decrease computer processing and resources
Agility| to react quickly. Cloud services can allocate/deallocate resources quickly| to rapidly develop, test and launch software applications
Fault tolerance| to remain up & running even if a component or service is no longer functioning| ensure you have zero downtime for services provided by Azure
Disaster recovery|to recover from a cloud service outrage|uses time-to-recovery and recovery point metrics to recover from tornadoes, floods and more
Predictive Cost|to predict what costs will be incurred for a paritcular cloud sevice or offering

- **High availability** means VMs can spin up fast to help processs requests
- **Fault tolerance** describes how Azure will ensure you have zero downtime for services provided by Azure
- **Disaster recovery** uses time-to-recovery and recovery point metrics to recover from tornadoes, floods and more
- **Scalability** refers to scaling out or scaling up
- **Elasticity** is the ability to quickly increase or decrease computer processing and resources
- **Agility** means to the ability to rapidly develop, test and launch software applications

### Economies of scale

- **CapEx** (Capital Expenditure):
  - Money spend by a business or organization on acquiring or maintaining fixed assets, such as land, buildings and equipment
  - large upfront investments
- **OpEx** (Operational Expenditure):
  - cloud computing with a pay-as-you-go model
  - An ongoing cost fro running a product, business, or system on a day-to-day basic, including annual costs
  - purchase products or services as-needed
- **Consumption-based Model**
  - no upfront costs
  - costly infrastruture not needed
  - pay for additional resources as-needed
  - stop paying for resources that no longer needed
- **exam Tips**
  - CapEx: buying hardware outright, paid upfront as a one time purchase
  - OpEx:  ongoing costs needed to run your business
  - Consumption-based model: pricing let's you pay only for what you use

### Cloud Architect Models

models|characteristics|pros|cons
---|---|---|---
Public Cloud | owned by, operated by, maintained by Cloud Providers|No purchase of hardware, low monthly fees|No control over features and versions, no physical access
Private Cloud | owned by, operated by, maintained by organizations, organization's own datacenter||maintenance, staffing
Hybrid Cloud |resource deployed across private/public cloud, such as hosting a website in public cloud and linking it to highly secure database|avoid disruptions and outages, adhere to regulation, governance etc| complex infrastructure

**Hyervisor**- Physical servers that host virtual machines('guests')  <- visualized Desktop

- Type 1: bare-metal
- Type 2: runs within a standard OS

### Types of Cloud Services Models

Type|Terms|User|Use case
---|---|---|---
IaaS|Infrastructure As A Service|System administrator|Migrating workloads, Test and Dev, Website Hosting, Backup, stor and recovery
PaaS|Platform As A Service|	Developer|DBMS, Web Application Hosting, Container Orchestration, Big data service
SaaS|Software As A Service|	cmd users| office 365, salesforce, facebook, Gmail

![AzureCloudServices](https://github.com/honggzb/Study-General/blob/master/Cloud-study/images/AzureCloudServices.jpg)

**exam Tips**

- IaaS
  - infrastruture = actual servers
  - scaling is fast
  - No owenership of hardware
  - for Azure IaaS means **provides servers, storage and networking as a service**
  - Disadvantages: **the shared responsibility model** applies
- PaaS
  - superset of IaaS
  - PaaS supports web application life cycle
  - Avoids software license hell
- SaaS
  - Providing a managed service
  - Pay an access fee to use
  - No maintenance an latest features
- Serverless
  - Azure funtions is the best know serverless service
  - Extreme PaaS

![typesOfCloudServices](https://github.com/honggzb/Study-General/blob/master/Cloud-study/images/typesOfCloudServices.png)
![IaaS](https://github.com/honggzb/Study-General/blob/master/Cloud-study/images/IaaS.png)
![PaaS](https://github.com/honggzb/Study-General/blob/master/Cloud-study/images/PaaS.png)
![SaaS](https://github.com/honggzb/Study-General/blob/master/Cloud-study/images/SaaS.png)
![cloud responsiblity](https://github.com/honggzb/Study-General/blob/master/Cloud-study/images/cloud%20responsiblity.png)

-------------------------------------------

## Module 2: Core Azure Services(30-35%)

### Core Azure architectural components

#### Azure Regions/location

- A region is a collection of datacenters. Geograhical location consisting of one or more AZs(normally at least **three**)
- deployed within a latency-defined perimeter and connected through a dedicated regional low-latency network
- Charactoristic
  - Geographical
  - 54 regions, 140 countries
  - Undisclosed Azure government regions
- Exam tips
  - more global regions than any other cloud provider.
  - provide flexibility and scale
  - preserve data residency and offer comprehensive compliance and resiliency options for customers
  - For most Azure services, when you deploy a resource in Azure, you choose the region where you want your resource to be deployed
- **Important**
  - Some services or VM features are only available in certain regions, such as specific virtual machine sizes or storage types.
  - There are also some global Azure services that do not require you to select a particular region, such as
    - Azure Active Directory, Azure Traffic Manager, and Azure DNS.
- Special regions
  - US DOD: Central/Viginia/lowa
  - China:  East/Norht
  - Germany: Central/North east
- https://azure.microsoft.com/en-us/global-infrastructure/regions/
- Azure Service Availability
  - Varies by region
  - Examples
    - Azure Search - not in Canada East
    - G-series VMs = not in Central US

![georegiondatacenter](https://github.com/honggzb/Study-General/blob/master/Cloud-study/images/georegiondatacenter.png)

#### Region Pairs

- Each region is paired with another region within the same geography except Brazil South
- Replication
- Things to know about regional pairs:
  - Physical isolation: When possible, Azure prefers at least 300 miles of separation between datacenters in a regional pair
  - Platform-provided replication: Some services such as Geo-Redundant Storage provide automatic replication to the paired region
  - Region recovery order: In the event of a broad outage(Outage Failover), recovery of one region is prioritized out of every pair.
  - Sequential updates: Planned Azure system updates are rolled out to paired regions sequentially (not at the same time) to minimize downtime, the effect of bugs, and logical failures in the rare event of a bad update
- https://docs.microsoft.com/en-us/azure/best-practices-availability-paired-regions

##### Feature(Azure service) Availability

- All Azure service are not available in regions
  - varies by region: always changes
- Global service
  - Azure AD(Active Directory)
  - Traffic manager
  - Azure DNS
- https://azure.microsoft.com/en-us/global-infrastructure/services/

#### Geographies

- Discrete markets that preserve data residency and compliance boundaries
- Typically contain two or more regions
- Data residency refers to the physical or geographic location of an organization's data or information
- Five:
  - Americas, Europe, Asia Pacific, Middle East, Africa

#### Azure Data Centers

- the **phychical** facilities of Azure cloud computing
- Data Center Components
  - HVAC- Heating and Ventilation and Air Condition
  - Equipment racks
  - Hypervisor servers
  - Storages arrays
  - Routers, switches, UPSs, generators
- Data Center Physical Security
  - Fencing, alarms, guards
  - **Mantrap** doors, logged entry and exit
  - Employee background checks
  - Locked rooms
  - Locked equipment racks

#### Availability Options

![AvailabilityOptions](https://github.com/honggzb/Study-General/blob/master/Cloud-study/images/AvailabilityOptions.png)

##### Azure Availability Sets

- Keep application online during maintenance or hardware failure
- **Update Domain(UD)**
  - A logical section of a data center
  - **schedule** maintenance performance or security updates are sequenced through update domain
- Fault Domain(FD)
  - A physical separation of your workloads **across** different hardware in a datacenter

##### Azure Availablity Zones(AZs)

- **One or more** data centers with high-speed network links
- fault domains:  physically separate locations within an Azure region that use availability sets to provide additional fault tolerance
- Includes one or more datacenters, equipped with independent power, cooling and networking
- Acts as an isolaation boundary
- operated by portal
- Provide:
  - Low latency(latency is the time it takes data to travel, means that datacenter are not too far from each other)
  - High Availability
  - Resiliency

#### Azure Resource Groups

- Containers for multiple resources that share the same life cycle
- Aggregates resources into a single manageable unit
- Considerations
  - Each resource must exist in one, and only one, resource group
  - A resource group can contain resources that reside in different regions
  - You can add or remove a resource to a resource group at any time
  - You can move a resource from one resource group to another
- **Authorization**
  - Resource groups are also a scope for applying role-based access control (RBAC) permissions. By applying RBAC permissions to a resource group, you can ease administration and limit access to allow only what is needed
- Resource groups Facts
  - **One Resource:**  each resource can only exist in a single resource group
  - **Add/Remove:**  can add or remove resources to any resource group at any time
  - **Move Resource:** can move a resource from one resource group to another
  - **Multiple Regions:** Resources from multiple regions can be in one resource group
  - **Access Control:** can give users access to a resource group and everything in it
  - **Interact:** resources can interact with other resources in different resouce groups
  - **Location:** a resource group has a location, or region, as it stores meta dat about the resources in it
- **Note:** you delete a resource group you delete all resources contained within it.
- can manage and apply the following resources at resource group level:
  - Metering and Billing
  - Apply policies
  - monitoring & Alerts
  - Quotas
  - Access Control

#### Azure Resource Manager(ARM)

- Mangaged related resources(web application, databases, storage accounts, VM) as a group
- Used for Azure resource deployment(through ARM to deploy resources)
- Provides Azure resource management- create, configure, manage and delete resources and resource groups
- management tools
  - GUI(Azure portal), command line
  - ARM template(.JSON file format) by using Azure CLI or Azure Powershell
  - SDKs

[back to Core Azure architectural components](#Core-Azure-architectural-components)

### Azure Compute Service

#### Visual Machine(VM)

- IaaS
- Rapid Provisioning
- Windows and Linux
- Usage fees:
  - VM size: vCPU, RAM and disk IOPS
  - Amount of time running
- Consideration
  - VM size
  - Azure region in which VM will be deployed
  - VM OS and data disks
  - VM extension(agents): security, backup, script support
  - Azure subnet into which VM will be deployed and IP address
  - Specify logon credentials
  - Connect using Remote Desktop Protocol(RDP 3389)
  - Ensure firewall allow RDP
  - VM availability sets for high availability
    - VMs in the set do not have to be identical
  - VM backup
- Linux VM
  - Username/password authentication
  - Public key authentication
  - Connect using Secure Shell(SSH)
  - Ensure firewalls allow SSH
  - VM availability sets for high availability
  - VM backup
- Windows VM
- Azure Virtual Machine Control
  - IaaS Vms
    - Deployed manually
    - Full configuration control
  - Managed Vms
    - Deployed automatically when you deploy a higher level service such as SQL
    - Limited configuration control
- Deployment/Management method
  - Azure Portal
  - Azure Powershell
    - `New-AzVm -ResourceGroupName "MyResourceGroup" -Name "MyVm01" -Image "UbuntulTS"`
  - Azure CLI
    - `az vm create --name myVMCLI --resource-group [resource group name] --image UbuntuLTS --location EastUS --admin-username azureuser --admin-password Pa$$w0rd1234`
  - ARM template
  - RESTAPIs and client SDKs
- Install the Web-Server by PowerShell: `Install-WindowsFeature -name Web-Server -IncludeManagementTools`
- Communicate between VMs: `New-NetFirewallRule –DisplayName “Allow ICMPv4-In” –Protocol ICMPv4`

[back to top](#top)

#### Virtual machine Scale Sets

- Scale Sets are a group of identical, can be activated or deactivated as needed,
- load balanced VMs
- Benefits
  - simple to manage multiple VMs using a **load balancer**
  - High availability: if one VM fails or stops, the others in the scale set will keep working
  - Auto scaling
  - Large scale: run up to 1000 Vms in a single scale set
  - No extra cost, you only pay for the VM, storage and networ king resources you use. Nothing additional for scale sets

#### Azure Container Instances

- Containers
  - Containers reference the operating system of the host environment that runs the container
  - Unlike virtual machines you do not manage the operating system.
  - Containers are lightweight and are designed to be created, scaled out, and stopped dynamically.
  - Containers allows you to respond to changes on demand and quickly restart in case of a crash or hardware interruption.
  - Azure supports Docker containers
- Two ways to manage both Docker and Microsoft-based containers in Azure
  - Container Instances
    - PaaS
  - Azure Kubernetes Service(AKS)
    - open source tool for orchestrating and managing many container images and applications
    - uses clusters and pods to scale and deploy application
- Containers have less overhead than VM and can be deployed consistently

##### Migrate apps to containers(microservice architecture)

1. convert an existing application to one or more containers and then publish one or more container images to the Azure Container Registry
2. By using the Azure portal or the command line, you deploy the containers to an AKS cluster
3. Azure AD controls access to AKS resources
4. access SLA(Service Level Agreement)-backed Azure services, such as Azure Database for MySQL, via OSBA
5. Optionally, AKS is deployed with a virtual network

![4-kubernetes-migration](https://github.com/honggzb/Study-General/blob/master/Cloud-study/images/4-kubernetes-migration.png)

#### Azure App Service

- managed platform to host your application(PaaS)
- Web App, Containers and API
- Key features
  - support Multiple programming languages
  - DevOps optimization
  - Global scale with high availability
  - Connections to SaaS platforms and on-premises data
  - Security and compliance
  - Application templates
  - Visual Studio integration
  - API and mobile features
  - Serverless code

#### Azure Functions

- a code-only solution
- Often used when you need to perform some task in response to an event

#### Serverless compute

- Serverless computing is the abstraction of servers, infrastructure, and OSs. With serverless computing, Azure takes care of managing the server infrastructure and allocation/deallocation of resources based on demand
  - serverless Azure offering
  - a function does one compute action each time it is invoked
- Azure has two implementations of serverless compute:
  - **Azure Functions** which can execute code in almost any modern language
  - **Azure Logic Apps** which are designed in a web-based designer and can execute logic triggered by Azure services without writing any code

[back to Azure Compute Service](#Azure-Compute-Service)

### Azure network services

![azure-networking](https://github.com/honggzb/Study-General/blob/master/Cloud-study/images/azure-networking.png)

#### Azure Virtual Networks(Vnets)

- Virtual Network is a fundamental part of Azure Infrastructure
- Vnet is a single region and single subscription
  - **regions:** A Vnet belongs to a single region. Every resource on the Vnet must be in the same region
  - **Subscriptions:** a Vnet belongs to just one subscription, but a subscriptiion can have multiple Vnets
- Managed via the portal, CLI or Powershell
- How to determination deployment
  - Vnet location(region)
  - IPv4 CIDR notation
    - 10.1.0.0/16,
    - 10.1 -> network of this Vnet
  - Firewalls and DDos protection
- Advantages
  - Isolate deployed Azure resources
  - VNets can link to other VNets(peering)
  - VNets can link to an on-premised networdk
  - VNet DNS can be customized
  - Private and public IP address
  - Vnets in the cloud can scale, have high availability and isolation
- Azure Virtual **Subnets**
  - are assigned a NSG(network Security Group) and route table
  - Subnet IP address range must fall within the parent VNet range
  - Subnet IP address range can be changed at any time

#### Azure Virtual Networks Management

- GUI
- CLI command
  - `az network vnet --help`
  - `az network vnet create --help`
  - `az network vnet create -g rg1 -n EastVnet2 --address-prefix 14.1.0.0/16 --subnet-name Subnet1 --subnet-prefix 14.1.1.0/24`
  - `az network vnet list | find "name"`
- PowerShell cmdlets
  - `$vnet=new-azvirtualnetwork -resourcegroupname rg1 -location canadaeast 0name EastVnet3 -addressprfix 15.1.0.0/16`
  - `$subnet=add-azvirtualnetworksubnetconfig -name Subnet1 -addressprefix 15.1.1.0/24 -virtualnetwork $vnet`
  - `$vnet|set-azvirtualnetwork`

#### Azure IP addressing

- Allow different service to communicate
- Types - Public/Private address
  - Public address
    - IPv4 or IPv6
    - static and dynamic allocation
    - allows incoming/outgoing internet connection
    - Public IPv6 - public-facing load balances only
  - Private address
    - IPv4 or IPv6
    - static and dynamic allocation
    - Allocated or set from the Vnet subnet IP range
    - used within a VNet or VPN/ExpressRoute
- Allocation - Dynamic/Static IP address
  - Dynamic IP address
    - IP address is released when resource is stopped or deleled(Such as VM stop/start)
    - Useful when the IP address does not have to remain the same
  - Static IP address
    - IP address stays with the resource until it is deleted
    - Useful when the IP address must remain the same
    - Static IPs are assigned by azure from an address pool

#### Load Balancer

- Load balancer distributes new inbound flows that arrive on the load balancer's frontend to backend pool instances, according to **rules** and **health probes**
  - inbound Flows: traffic from the internet or local network
  - FrontEnd: the access point for the load balancer. All traffic goes here first
  - Backend Pool: The VM instances receiving traffic
  - **Rules & Health Probes:** Checks to ensure backend instance can receive the data
- Scenarios
  - Internet Traffic: balance the load of incoming internet traffic into a system or application
  - Internal Networks: a load balancer works well with internal application
  - Port Forwarding: traffic can be forwarded to a specific machine in the backend pool
  - Outbound traffic: allow outbound connectivity for backend pool VMs

#### Azure VPN Gateway

- VPN Gateway are instrumental in a hybrid cloud architecture
- A VPN Gateway is a specific Vnet Gateway. It consists of two or more dedicated VMs.
- Sends encrypted data through encrypted tunnel between two endpoints
  - Vnet to Vnet
  - On-premises network to Vnet
- need to define **gateway subnet** in Azure virtual network
  - the subnet must be named **'GatewaySubnet'**
  - two VMs which not directly manageable
  - or don not deploy additional resources to the gateway subnet
- Types
  - **Point-to-point**
    - SSTP an IPsec protocol
    - VPN device not required
    - Single device VPN connection
    - Useful for travelling users
      - Secure access to Azure
  - **Site-to-site**
    - IPsec protocol
    - On-premise to Vnet
      - need VPN device
      - Windows RRAS
      - Public-facing IPv4 address
    - no VPN device if it is Vnet to Vnet
- Configuration
  - Point-to-site
    1. create a gateway subnet
    2. create Virtual network gateway
    3. PKI certificate   <- client connect to point-to-site VPN need PKI authenticate
    4. ...

#### Azure Application Gateway

- Load balanceer for web application traffic, it works on the **HTTP** request of the traffic
- difference with traditional load balance
  - traditional load balance -> traffic is routed based on **IP address and port**
  - Azure application gateway -> trafic routing based on **URL path routing**
- Benefits of using Azure Application Gateway over a simple load balancer
  - Session/Cookie affinity: can maintain a user session on the same back-end server
  - SSL termination
  - Web application Firewall(WAF)
    - Firewall designed to block web application exploits
    - cross-site request forgeries
    - directory traversal
    - cross-site scripting
    - SQL injection
  - URL rule-based routes: allow to route traffic based on URL partterns, source IP address and port to destination IP address and port(CDN)
  - Rewrite HTTP headers
- Support auto-scaling, end-to-end encryption, zone redundancy and multisite hosting
- Configuration
  - Private
  - Public

#### Content Delivery Networks(CDNs)

- a strategy we can employ in Azure to make sure that content is available to users locally
- cache content of Geographical POP(Point Of Presence) servers, Speed up end-user content delivery experience
- Features
  - Geo-filtering
  - Content compression
  - Caching rules:
  - Site acceleration
  - HTTPS custom domains
- Price tier
  - Standard Microsoft:
    - did not support dynamic site accelertion
    - did not support mobile device rules
  - Standard Verizon: support dynamic site accelertion
  - Standard Akamai:  support dynamic site accelertion
  - Premium Verizon:  support dynamic site accelertion

[back to top](#top)

### Azure Storage Services

- Storage Account = Unique Azure Namespace
  - `acloundgrur.<storage type>.core.windows.net`(every object in Azure has its own web address)

#### Azure data categories

Data Type| Schema | Data Relationships | Examples
---|---|---|---
Strutured| adheres to a schema with the same fields or properties| storable in relational database| Sensor data and financial data
Semi-Strutured|has an ad hoc schema with less organized fields or properties|Non-relational or NoSQL data| Books, blogs, JSON, HTML
Unstructured|has no designed schema or data struture|Non-relational or blob data| PDFs, JPGs, Videos

![AzureStorageServices](https://github.com/honggzb/Study-General/blob/master/Cloud-study/images/AzureStorageServices.jpg)

#### Azure Blob Storage

- **BLOB-** Binary Large Objects
- used as unstructured data storage
- take snapshots
- storage tiers
  - **hot** -> optimized for frequent access, lower access times and higher access costs
  - **cool** -> not frequent access, data remains here for at least 30 days
  - **Archive**  -> Lowest costs and highest access times
- BLOBs Types, all over accessible through **http/https**
  - Block BLOBs
    - used for small and large files, store text and binary data upt to 4.7TB
    - multiple block BLOBs can be uploaded concurrently
    - useful for storage of picture, office productivity documents
  - Page BLOBs
    - used for large file cloud storage, store files up to 8TB
    - designed for random read and write access, meaning file could be accessed at any time
    - useful for **.VHD** files
  - Append BLOBs
    - Designed so that new data can only by added to the end of the existing BLOB
    - existing blocks cannot be updated or deleted
    - useful for **logging**
- BLOB Hierarchy
  - Storage account: sa123   -> http://sa123
    - BLOB container: pics       -> http://sa123.blob.core.windows.net/pics
      - BLOB: pic1.jpg             -> http://sa123.blob.core.windows.net/pics/pic1.jpg

#### Azure BLOB storage management

`get-command-*storageaccount*`

1. Azure GUI management: portal
2. Azure CLI management
   1. create a storage account -> `az storage account create -n stor2020 -g rg1 -l canadaeast --sku "Standard_LRS"`
   2. view                     -> `az storage account list | find "name"`
   3. view keys                -> `az storage account keys list --account-name stor2020 --resource-group rg1 --output table`
   4. create a container       -> `az storage container create --name pics --account-name stor2020 --account-key xxxxxxx`
   5. upload blobs             -> `az storage blob upload --container-name pics --name mypicture.jpg --file c:\samplefiles\mypicture.jpg --account-name stor2020 --account-key xxxxxxx`
3. PowerShell management
   1. `new-azstorageaccount -resourcegroupname rg1 -name stor2020 -locatition canadaeast -skunam "standard_lrs"`
   2. `get--azstorageaccount`
   3. `$ctx=get-azstorageaccount -r rg1 -name stor2020` -> define a variable, then we can use `$ctx.context` instead of `get-azstorageaccount -r rg1 -name stor2020`
   1. `new-azstoragecontainer -name "pics" -context $ctx.context`
   2. `set-azstorageblobcontent -file c:\samplefiles\mypicture.jpg -container pics -blob mypicture.jpg -context $ctx.context`

#### Azure Disk Storage

- A disk is generally attached to a VM
- Disk Types
  - HDD: Spinning hard driver. Low cost and suitable for **backups**
  - Standard SSD: **standard** for production. Higer reliability, scalability and lower latency over HDD
  - Premium SSD: Super fast and haigh performance Very loaew latency. Use for **critical workloads**
  - Ultra Disk:  for the most demanding, data-intensive workloads. Disks up to 64TB

#### Azure File storage

![AzureFile](https://github.com/honggzb/Study-General/blob/master/Cloud-study/images/AzureFile.png)

- Migrating on-premises file storage solutions
- File Benefits
  - Sharing
  - Managed: you don't have to worry about hardware or operating system
  - Resilient: network and power outages won't affect your storage
- Characteristic
  - Cloud-based file shares
  - **SMB** access  -> Server Message Block protocol
  - Mountable from the cloud or on-promises
- Tools: Azure Portal, Azure CLI, Azure Powershell
- Presequ
  - require an Azure storage account
  - provide a share name and quota(size limit)
  - SMP access requires **TCP port 445** connectivity
  - From Windows
    - Driver letter
    - UNC path
    - Mount point path

#### Azure Archive Storage

- Requirement:  Policies, legislation and recovery can be requirements for archiving data
- Lowest Price
- Features: Durable, encrypted and stable. Perfectly suited for data that is accessed infrequently
- Free up Premium Storage
- Secure: fully secure to allow for any personal data such as financial records, medical data and more
- **Blob:** archive storage is blob storage

#### Azure Key Vault

- Secure secret storage: crytograhic keys, PKI certificates, password
- Backed by FIPS 1402-2 level 2 HSM
  - hardware security module
  - HSM device is a firmware device that is used at certain standard
- your existing HSM keys can be imported
- Steps
  - create key vault
  - create or upload secrets
  - configure apps to retrieve secrets from key vault
    - GUI in portal
    - `(get-azkeyvaultsecret -vaultname kv2020 -name secret1).secretvaluetext` in Azure CLI
    - `az keyvault secret show --name secret1 --vault-name kv2020 `in Azure powerShell

[back to top](#top)

### Azure Database Service

#### Cosmos DB

- Characteristics
  - NoSQL database solution
  - **Globally distributed** across Azure regions
  - support default encryption of data at rest
- requires an Azure CosmosDB account(Name)
- API selection(account) determines account type
  - Core(SQL)
  - Azure Cosmos DB for MongoDB API
  - Cassandra
  - Azure Table
  - Gremlin(graph)
- Import data to CosmosDB:  SQL databases, csv files, JSON files, MongoDB

#### Azure SQL Database

- Database as Service(DBaaS, PaaS)
  - *.database.windows.net
  - unique server and dataname
  - remove unused databases/server to reduce charges
- is managed service
- Bring your Own License(BYOL)
- Database server firewall enabled by default
  - can create a server firewall rule to allow inbound port 1433 traffic if needed
  - 'Add client IP'
- Scaling
  - Horizontal
    - Database replicas
    - Database sharding
  - Vertical
    - VM instance sizing
- Management
  - Azure CLI:  `az sql db create`
    - `az sql --help`
    - `az sql server create --name sqlsvr456 --resource-group rg1 --location canadaeast --admin-user cirving --admin-password Pa$$dsf`
    - `az sql db create --resource-group rg1 --server sqlsvr456 --name db456`
    - `az sql server firewall-rule create --resource-group rg1 --server sqlsvr456 -n AllowInboundSQL --start-ip-address 71.7.176.108 --end-ip-address 71.7.176.108`
  - Azure PowerShell: `New-AzSqlDatabase`
    - `Connect-AzAccount`
    - `New-AzSqlServer -ResourceGroupName rg1 -ServerName sqlsrv3362 -Location canadaeast -SqlAdministratorCredentials $(New-Object -TypeName System.Managment.Automation.PSCredential -ArgumentList "cirving", $(ConvertTo-SecureString -String "Pa$$dsf" -AsPlainText -Force))`
    - `New-AzSqlDatabase -ResourceGroupName rg1 -ServerName sqlsrv3362 -DatabaseName db112`
    - `New-AzSqlServerFirewallRule -ResourceGroupName rg1 -ServerName sqlsrv3362 -FirewallRuleName "AllowIncoming SQL" -StartIpAddress 71.7.176.108 -EndIpAddress 71.7.176.108`
  - ARM template: `Microsoft.sql/Servers`
- On-promise connect through Microsoft SQL Server Management Studio

#### MySQL

#### PostgreSQL

- Extensions: use a large number of extensions, such as JSONB, geospatial functions, indexing, integration with tools and much more
- Horizontal Scaling
- Perfomance recommendations
- Fully managed

#### Database Migration Services

- Migration Service
  - Moving database workloads from on-promises into Azure cloud
  - move data through a **site-to-site VPN** or an **ExpressRoute circuit**
- uses Microsoft data migration assistant to generate assessment report
- Migration Process:
- Migration Assessment tool: **Microsoft Data Migration Assistant**(on-promise software)

[back to top](#top)

### Azure Solutions

#### Internet of Things(IoT)

- Wide variety of devices that communicte over internet
- IoT and security
  - Consumer grade IoT devices
    - Firmware is not updatable
    - security is not a prority
  - change default settings
  - Place on isolated and secured network
- https://azure.microsoft.com/en-us/overview/iot/product-selector/

##### Azure IoT Central(SaaS)

- is centrally managed service, no coding needed
- is seperated Azure resource that we deployed
- *.azureiotcentral.com
- centralized IoT device management and monitoring

##### Azure IoT Hub(PaaS)

- a separate type of Azure resource that you can deploy
- Azure IoT central uses an IoT Hub
  - The IoT Hub is not directly manageable in this case
- Centralized messaging reposity for IoT devices
- IoT devices must be connected to IoT hub
  - connection strings
    - device registration
    - device message transmission and receipt to and from IoT hub
- Usage
  - Medical device tracking
  - Industrial machinery control
  - Remote building HVAC(Heating Ventilation and Air Conditioning) control
- IoT Device Connection Protocols
  - Https, Tcp 443
  - AMQP, Tcp 5672: (Advanced Message Queuing Protocol) is a standard for IoT device transmission of data
  - MQTT, Tcp 1883: (Message Queuing Telmetry Transport)
- IoT Hub units determines IoT Hub scale capacities

##### Azure IoT Edge

- is an IoT-based solution for Azure Cloud that allows us to have custom code running on IoT Services
  - Custom IoT software
  - Modules are deployed to IoT device
- Azure IoT Edge components
  - IoT hub: centally register IoT services and manage and monitor in Azure cloud
  - IoT devices
  - IoT Edge runtime:
    - needs to run in IoT services
    - an agent that allows us to push out our code modules or docker cmpatible containers that have our custom code onto IoT services
- IoT Edge Process
  - create IoT Hub in portal
    - register IoT device
      - Run IoT Edge runtimes on device
        - Deploy code to device

##### Azure IoT solution Accelerators

- Pre-created IoT cloud solutuons
  - Custom code is already written
  - IoT device monitoring
  - Required Cloud IoT services are created automatically
- Use accelerators as
  - completed IoT cloud solutions
  - starting point
- Deploying
  - select accelerator from the website("try now")
  - IoT service simulators
  - Azure CosmosDB storage
  - Monitoring dashboard

[back to top](#top)

#### Big Data and Analytics

- Azure SQL Data Warehouse
  - a cloud-based Enterprise Data Warehouse that leverages massively parallel processing to run complex queries quickly across petabytes of data
  - Analysis queries that take days to complete on a traditional database system typically complete within hours when run in SQL data Warehouse
- Azure HDInsight
  - open-source framework and cluster types
- Azure Data Lake Analytics
  - on-demand analytics job service
  - https://azure.microsoft.com/en-us/product-categories/analytics/
- Azure Databricks
  - an Apache Spark-based analytics platform that's optimized specifically for Microsoft Azure

##### Azure Synapse Analytics

- Reincarnation of Azure SQL Data Warehouse plus new features and functionality, greatly expands insight discovery from all you data and allows you to apply machine learning models to all your intelligent apps
- Combines Enterprise Date Warehousing and Big Data analytics
- Four components
  - SQL Analytics
  - Spark
  - Data Integration
  - Studio
- https://docs.microsoft.com/en-us/azure/synapse-analytics/sql-data-warehouse/sql-data-warehouse-overview-what-is

[back to top](#top)

#### Ariificial Intelligence

- Azure Machine Learning Service
  - provides a cloud-based environment used to develop, train, test, deploy, manage and track machine learning models
  - https://azure.microsoft.com/en-us/overview/ai-platform/
- Azure Machine learining Studio
- Azure Cognitive Services
  - collection of domain-specific pre-trained AI models that can be customized with your data
  - Vision, Speech, Language, Knowledge, search

#### Serverless Computing

- a cloud-hosted execution environment that runs your code but abstracts the underlying hosting environment
- configure your serverless apps to respond to events
- Azure Funtions
  - code running your service and not he underlying platform or infrastruture
  - a perfect solution when demand is variable
  - Azure Functions are stateless
  - the most basic of compute tasks
  - Does one function then dies until next time it is called
  - Azure Functions can be connected to an Azure storage service
- Azure Logic Apps
  - a quick and simple way to intgrate systems and applications inside and outside of Azure
  - a cloud service that helps your automate and orchestrate tasks, business processes and workflow when you need to integrate apps, data, systems and services
  - Designed in a web-based designer
  - Such connectors like SAP, saleforce and Oracle
  - ![logicApp](https://github.com/honggzb/Study-General/blob/master/Cloud-study/images/logicApp.png)
- Azure Event Grid
  - a fully-managed, intelligent event routing service that uses a publish-subscribe model for uniform event consumption
  - built-in support for events coming from Azure services, like storage blobs and resource group
  - Routing service: sending and receiving events between applications
  - support custom non-Azure-based events in near-realtime via custom topics

#### DevOps(Development and Operations)

- is the work between development and production
- Features
  - Azure Boards: keep track of work tasks, timelines, issues, planning and much more.
  - Azure pipeline: produce and test your software automatically and continuously
  - Azure Repos:  store source code for your application security in a managed way.
  - Azure Test plans: Design tests of applications to implement automatically.
  - Azure Artifacts: share applications and code libraires with other teams inside and outside your organization
- Azure DevOps Service
  - including pipeline, Git repositories, Kanban and extensive automated and cloud-based load testing
- Azure DevTest Labs
  - Environment management, allows you to quickly create environments in Azure while minimizing waste and controlling cost
  - Templates

#### Azure App Service

- Web app

[back to top](#top)

---------------------------------------------------------------------

## Module 3: Security, Privacy, Compliance and Trust(25-30%)

- Distributed Denail of Service(**DDoS**)
  - Many Internet-connected Devices target a single website to make it stop
- Azure DDos Protection
  - Two Tiers:
    - Basic Tier: automatically enabled in Azure
    - Standard Tier: adds mitigation capabilities
  - DDoS standard protection can mitigate the following types of attacks:
    - Volumetric attacks
    - Protocol attacks
    - Resource (application) layer attacks

### Azure Secure network connectivity

- Defense in depth
- ![Defense in depth](https://github.com/honggzb/Study-General/blob/master/Cloud-study/images/defense-depth.png)

#### Azure Firewall

- - Azure firewall is a cloud managed resource that can control inbound and outbound traffic to and from Azure based on rules
  - a firewall defines rules for what kind of traffic can and cannot access the device or service behind it
- Azure Protects against DDoS attacks with no downtime to you
- Azure Firewall uses a static public IP address to represent the virtual network resources behind it
  - fully integrated with Azure Monitor
  - built-in high availability
  - unrestricted cloud scalbility
  - inbound and outbound filtering rules
  - Azure Monitor logging
- a NSG protects a subnet or VM
- Sample
  1. create a Vnet in resource group with 3 subnet
     1. create subnet for Jump server
     2. create subnet for production workloads
     3. create subnet for azure firewall
  2. create VM in Jump server
     1. make sure there is public inbound ports(windows)
     2. make sure there is public IP
  3. create VM in production subnet
     1. make sure there is no public inbound ports
     2. make sure there is no public IP
  4. create azure firewall in firewall subnet
     1. make sure there is public IP address
  5. create a route table
     1. attach to prod subnet
     2. add a route in route table to map the next hop address to private address of azureFirewall
  6. in az firewall -> write application rule to allow xxx.xxx.com
- Azure Application Gateway also provides a firewall, called the Web Application Firewall(WAF). WAF provides **centralized,** **inbound** protection for your web applications against common exploits and vulnerabilities

#### Network Security Group(**NSG**)

- Filters network traffic to and from Azure resources connected to Azure Virtual Networks
- Resource Firewall, attach to Virtual network, subnet or network interface
- Rules: a NSG determints who can access the resources attached to it, using rule for inbound and outbound traffic
  - When you create a network security group, Azure creates a series of default rules to provide a baseline level of security. You cannot remove the default rules, but you can override them by creating new rules with higher **priorities**
- Network security rule properties

Property|Explanation
---|---
Name|Unique name of the Network Security Group (NSG)
Priority|A number between 100 and 4096. Rules are processed in priority order, the lower priority number the higher the priority
Source or Destination|	Individual IP address or IP address range, service tag, or application security group
Protocol|TCP, UDP, or Any
Direction	|Whether the rule applies to inbound or outbound traffic
Port Range|	An individual port or range of ports
Action|	Allow or Deny

#### Application Security Groups(ASG)

- Focus the security on the application rather than the IP endpoint
- Group VMs and Virtual networks into logical application groups and apply an application security group
- to configure network security as a natural extension of an application's structure, allowing you to group virtual machines and define network security policies based on those groups
- Reuse your security policies at scale

#### Azure network security solutions

- Perimeter layer
  - protects network boundaries using Azure DDoS protection and Azure Firewall
    - Use Azure **DDoS Protection** to filter large-scale attacks before they can cause a denial of service for end users
    - Use perimeter **firewalls** with Azure Firewall to identify and alert on malicious attacks against your network
- Network layer
  - only allows traffic to pass between networked resources inbound and outbound rules defined
  - Use **NSGs** to create rules about inbound and outbound communication at this layer
  - Deny by default
  - Implement secure connectivity to on-premises networks
- Combine services
  - Network security groups + Azure Firewall
  - Application Gateway WAF + Azure Firewall

[back to top](#top)

### Core identity services

#### Azure Active Directory(AAD) Service

Authentication | Authorization
---|---
Making sure you are you | comes after authentication
Confirming identify | Do you get access?
First test for access |

- Manage users and permissions: identity & access management service
  - Authentication
  - Single Sign-On(SSO)
  - Application Management
  - B2B
  - B2C
  - Device Management
- **Mandatory:** you can't have an Azure account without an AAD service
- **First User:** Every Azure account needs a first user and this user is in the initial AAD instance
- Tenant
  - Organization: a tenant represents the organization
  - Dedicated AAD: a tenant is a dedicated instance of AAD that an organization receives when signing up for Azure
  - Separate:  each tenant is distinct and completely seperate from other AAD tenants
  - One User -> One Tenant:  each user in Azure can only belong to a single tenant. Users can be guests in multiple tenants
- Subscription
  - Billing Entity: all resources belong to a singel subscription
  - Cost Seperation:  you can have multiple subscriptions within a tenant to separate costs
  - payment:
- AAD can help manage users in a hybrid cloud setup
- contains
  - Users
  - groups
    - Group types: security, Office 365
  - Applications
  - Devices
- Features
  - Azure AD join
  - Azure AD Domain services
  - Azure AD Connect
- Setting

#### Azure Multi-Factor Authentication(MFA)

- provides additional security for your identities by requiring two or more elements for full authentication. These elements fall into three categories:
  - Something you know could be a password or the answer to a security question
  - Something you possess might be a mobile app that receives a notification, or a token-generating device
  - Something you are is typically some sort of biometric property, such as a fingerprint or face scan used on many mobile devices
- Multi-factor authentication (MFA) comes as part of the following Azure service offerings:
  - Azure Active Directory premium licenses
  - Multi-factor authentication for Microsoft 365
  - Azure Active Directory global administrators

[back to top](#top)

### Security tools and features

#### Azure Security Center

- Monitor security hygiene for VMs
  - Each VM has an agent installed that sends data
- Monitor security settings across on-premises and cloud workloads, and automatically apply required security to new services as they come online
- analyzes the data and alerts you if necessary
- Use machine learning to detect and block malware from being installed on your virtual machines and services. You can also define a list of allowed applications to ensure that only the apps you validate can execute
- Provide just-in-time access control for ports, reducing your attack surface by ensuring the network only allows traffic that you require.
- Define policies
- Provide security recommendations based on your configurations, resources, and networks
  - Policy and compliance metrics
  - a 'secure score' to entice great security hygience
  - integrate with other cloud provides
  - alerts for resources that aren't secure
- Using Security center
  - Define policies
  - Protect resources through monitoring your policies and their outcomes
  - Repond to any security alerts. Investigate all of them and then go back to step 1 to define new policies to account for the alert
- Azure Security Center Tiers
  - **Free** Tier: limited to assessments and recommendations of Azure resources only.
  - **Standard** Tier
  - http://azure.microsoft.com/pricing/details/security-center

#### Key Vault

- a security way to share access to applications and resources with third parites without eve rrevealing any credentials
- Stores application secrets in a centralized cloud location, to securely control access permissions and access logging
- Secrets management, key management, certificate management, stores secrets backed by HSMs
- Applicaiton Isolaiton
- Global scaling

#### Azure Information Protection(AIP)

- AIP is a cloud-based solution that helps organizations classify and (optionally) protect its **documents** and **emails** by applying **labels**. Labels can be applied automatically (by administrators who define rules and conditions), manually (by users), or with a combination of both (where users are guided by recommendations)
- Secure documents, emails and data outside of the company network
- Classify Data: classify Data accoriding to how sensitive it is either using policies, or manually
- Track activities: track what is happening with shared data and revoke access if needed
- Share Data: safely share data as you can control who edits, views, prints and forwards it
- Intergation: controls for document access is integrated with common applications and tools, such as microsoft office
- AIP can be purchased as a standalone solution, through Enterprise Mobility + security or through Microsoft 365 Enterprise

#### Azure Advanced Threat Protection(ATP)

- ATP is used to identify, detects, and investigate advanced threats and compromised identities
- Monitor Users: analyze user activity and information. This includes any permissions and memberships of groups
- Baseline Behavior: record what a user's normal behavior and routine is. Any activity outside this routine will be logged as suspicious
- Suggest Changes: ATP will suggest changes to conform with security best practices, to reduce risks
- ATP
  - Portal:  Dedicted portal for monitoring and responding to suspicious activity
  - Sensors: Installed directly on domain controllers
  - Cloud service: run in Azure, is connected to Microsoft's intelligence security graph
- ATP is available as part of the Enterprise Mobility + Security 5 suite and as a standalone license

[back to top](#top)

### Azure Sentinel



[back to top](#top)

### Azure governance methodologies

- Policies to control and audit resource creation
- Role-Based Access Control(RBAC) can fine-tune access to your resources

#### Azure policy

- policies enforce different rules and effects over your resources, so those resources stay compliant with your corporate standards and service-level agreements (SLAs)
- There are several built-in policy and initiatives in storage, networking, compute, security and monitoring
- Policy can also integrate with Azure DevOps
- Policy create Steps
  - Create a policy definition
  - Assign a definition to a scope of resources
  - Review the policy evaluation results
    - Policy evaluation happens about once an hour,
- https://docs.microsoft.com/en-us/azure/governance/policy/samples/
- policy initiatives(work with Azure Policies)
  - Initiative definition: a set of policy definitions to help track your compliance state for a larger goal
  - Initiative assignments: an initiative definition assigned to a specific scope
  - ![initiatives](https://github.com/honggzb/Study-General/blob/master/Cloud-study/images/initiatives.png)

#### Azure Role-Based Access Control(RBAC)

- can give other administrators limited access to manage specific resources
- fine-gained access management for Azure resources, self-provisiong
- senarios
  - manage Vnets
  - DB group aoly access control to Access Control(IAM) blade in Resource Group or other service
- Best Practices
  - Segregate duties within your team, granting only the specific access that your users need to perfom their job
  - Allow only certain actions at each scope level

#### resource locks

- used to prevent accidental deletion or midification of Azure resourcs
- view, add, or delete locks, go to the **SETTINGS** section of **any** resource's settings blade

Lock type | Read | Update|Delete
---|---|---|---
CanNotDelete|Yes|Yes|No
ReadOnly|Yes|No|No

#### Explore Azure blueprints

- used to define repeatable sets of Azure resources that implement and adhere to standards, patterns and requirements
- Azure Blueprint is a declarative way to orchestrate the deployment of various resource templates and other artifacts, such as:
  - Role assignments
  - Policy assignments
  - Azure Resource Manager templates
  - Resource groups
- Blueprint process
  - Create an Azure Blueprint
  - Assign the blueprint
  - Track the blueprint assignments
- Resource Manager Templates VS Azure blueprints
  - Resource Manager Templates -> no active relationship with the deployed resources
  - Azure blueprints           -> Azure Blueprint, each deployment is tied to an Azure Blueprint package. This means that the relationship with resources will be maintained

#### subscription governance

three aspects to consider in relation to creating and managing subscriptions:

- Billing
- Access Control
- Subscription limit

[back to top](#top)

### monitoring and reporting

#### Tags

- **Metadata** to logically organize them into a taxonomy
- Each tag consists of a **name** and a **value** pair
- Tag limitations
  - Not all resource types support tags
  - Each resource or resource group can have a maximum of **50** tag name/value pairs
  - Tags applied to the resource group are not inherited by the resources in that resource group

limited characters | name | value
---|---|---
general| 512 | 256
storage accounts|128 |256
VM and VM Scale Sets|2048|2048

#### Azure Monitor

- collecting, analyzing, and acting on telemetry from your cloud and on-premises environments
- Azure Monitor collect from each of the following tiers
  - Application monitoring data: Data about the performance and functionality of the code you have written, regardless of its platform.
  - Guest OS monitoring data
  - Azure resource monitoring data
  - Azure subscription monitoring data
  - Azure tenant monitoring data
- Diagnostic settings
  - Activity Logs
  - Metrics
- Enabling diagnostics
  - can extend the data to resources by enabling diagnostics and adding an agent to compute resources
  - the resource settings you can enable Diagnostics
    - Enable guest-level monitoring
    - Performance counters
    - Event Logs
    - Crash Dumps
    - Sinks: send your diagnostic data to other services for more analysis
    - Agent: configure agent settings

#### Azure service health

- a suite of experiences that provide personalized guidance and support when issues with Azure services affect you
- Azure Service Health is composed of
  - Azure Status
  - Service Health
  - Resource Health

#### Monitoring applications and services

you can integrate Azure Monitor with other Azure services

categories | Monitor features
---|---
Analyze| Application insights, Azure Monitor for Containers, Azure Monitor for VMs
Respond | Emails and Texts(Alerts), Automated Process(Autoscale)
Visualize | Charts, Tables, Dashboards, and Views
Integrate | Other Azure services can work with Azure Monitor

[back to top](#top)

### privacy, compliance, and data protection

- Compliance terms and requirements
  - CJIS, HIPAA, CSA STAR certification, ISO/IEC 27018, GDPR, NIST
  - [Azure compliance](https://azure.microsoft.com/en-ca/overview/trusted-cloud/compliance/)
- Microsoft Privacy Statement
  - explains what personal data Microsoft processes, how Microsoft processes it, and for what purposes
  - [Microsoft compliance offerings](https://docs.microsoft.com/en-us/microsoft-365/compliance/offering-home?view=o365-worldwide)
- Trust Center
  - a **website** resource containing information and details about how Microsoft implements and supports security, privacy, compliance, and transparency in all Microsoft cloud products and services
  - Trust Center provide
    - lists of recommended resources
    - Role-specific information for business manageers, admin, engineers, risk assessors, privacy officers and legal teams
  - https://www.microsoft.com/en-ca/trust-center
- Service Trust Portal(STP)
  - **hosts** the Compliance Manager service, and is the Microsoft public site for publishing audit reports and other compliance-related information relevant to Microsoft’s cloud services
  - Use STP to access
    - Audit reports across Microsoft cloud service(can download)
    - Guides to using Microsoft cloud service for regulatory compliance
    - Publishions about trust, and how Microsoft cloud service protect your data
  - Access
    - some Service Trust Portal materials, must sign in as an authenticated user
  - https://servicetrust.microsoft.com/ or https://aka.ms/stp
- Compliance Manager
  - a workflow-based risk assessment **dashboard** within the Trust Portal that enables you to track, assign, and verify your organization's regulatory compliance activities
  - Features
    - View information related to Microsoft's compliance with regulations like HIPAA and GDPR
    - Self-assessment of your own compliance with these regulations
    - Compliance score helps track your progress and to priorize auditing controls
    - A secure repository that you cvan use to upload and manage evidence and other artifacts related to your organizations's compliance activities
- [Azure Government services](https://azure.microsoft.com/global-infrastructure/government)
  - a **separate instance** of the Microsoft Azure service.
  - It addresses the security and compliance needs of US federal agencies, state and local governments, and their solution providers.
  - Azure Government offers **physical isolation from non-US government** deployments and provides screened US personnel
  - [Compare Azure Government and global Azure](https://docs.microsoft.com/en-us/azure/azure-government/compare-azure-government-global-azure)
- [Azure China 21Vianet](https://docs.microsoft.com/en-us/azure/china)

[back to top](#top)

### Privacy, Compliance and Trust

#### Governance

- Azure Policy(a set of rules to ensure compliant resources)
- Role-Based Access Control(RBAC)
  - Define specific User Access to individual resources
  - Minimum Access: RBAC can enable minumum access necessary to resources. This ensures only users with valid access can manage resource
  - Target Specific Use Cases
  - Role Assignment
    - Security Principal: an object representing an entity such as a user or group, which can access the resource
    - Role definition: a collection of permissions such as read, write and delete
    - Scope: the resources the access applies to. Specify which rol can access a resource or resource group
  - Locks
    - Assigning: assign a lock to a subscription, resource group or resources
    - **Types:** a lock can be of two types:
      - **Delete**
      - **Read-Only**
    - Locked means Locked: a lock needs to be removed before the locked actions can be performed again
- Azure Blueprints: templates for creating standard azure resources(Environment)
  - ![azureBlueprint](https://github.com/honggzb/Study-General/blob/master/Cloud-study/images/AzureBlueprint.png)
- Azure Advisor for Security Assistance
  - part of Azure Security Center

Role|admin| billing| General
---|---|---|---
Admin|Read/write|Read/write|Read/write
Accountant||Read/write|Read
Standard user|||Read

#### Azure Monitor

- Maximize Performance, Maximize Availability, Identify Issues
- Fully Managed: Azure Monitor is centralized and fully managed. you can analyze all the data from one place
- Query Language: full access to an interactive query language to lean about the telmetry data
- Machine Learning: Predict and recognize problems faster with built-in machine learning

#### Azure Service Health

- Dashboard
- Cystin Alerts
- Real-time Tracking
- Free Service

#### Compliance

- Industry Regulations
  - General data protection regulation(**GDPR**)
  - **ISO** standard
  - Mational Institute of Standards and Technology(**NIST**)
  - ![regulation](https://github.com/honggzb/Study-General/blob/master/Cloud-study/images/regulation.png)
- Azure Compliance Manager
  - Recommendations
  - Tasks: assign compliance tasks to team members and track progress
  - Compliance Score
  - Securet Storage: upload documents to prove compliance and store them securely
  - Reports: get reports of compliance data to provide to managers and auditors
- Azure Government Cloud
  - dedicated datacenters to US Government bodies, compliant with US federal, state and local requirements
  - ![AzureGovernmentCloud](https://github.com/honggzb/Study-General/blob/master/Cloud-study/images/AzureGovernmentCloud.png)
- China Region
  - contains all data and datacenters within China, complies with all applicable Chinese regulations
  - ![ChinaRegion](https://github.com/honggzb/Study-General/blob/master/Cloud-study/images/ChinaRegion.png)

#### Privacy

- Azure Information Protection: classify, label and protect data based on data sensitivity
- Azure Policy: define and enforce rules to ensure privacy and external regulations
- Guides: respond and comply with GDPR privacy requests
- Compliance Manager:
- Microsoft Privacy Statement

#### Trust

- Trust Center
- Service Trust Portal

----------------------------------------------------------------

[back to top](#top)

## Module 4: Microsoft Azure pricing, service level agreements, and lifecycles(20-25%)

### Subscriptions

- Features
  - All resources belong to a subscription
  - Multiple subscription: any azure account can have multiple subscriptions.
- Billing Cycle: either 30 or 60 days
- Management Groups
  - Group subscription: take action across subscriptions in bulk. very useful in large organization
  - Organize: manage access, policies and compliance in bulk
  - Billing Logic: maintain billing associated with the right budgets. Nest management groups to indicated hierarchy and relationship
- Subscriptions Options
  - free trial
  - Pay-As-you-go
  - Visual Studio Enterprise: BizSpark
  - Visual Studio Professional
- Organization Structure
  - can create subscriptions to reflect different organizational structures
  - ![subscriptions](https://github.com/honggzb/Study-General/blob/master/Cloud-study/images/subscriptions.png)
- Subscriptions can use to define boundaries around Azure products services, and resources.
  - Billing boundary
  - Access control boundary: apply access-management policies at the subscription level, and you can create separate subscriptions to reflect different organizational structures

### management groups(Organization Structure)

- Organizing structure for resources in Azure has four levels
  - Management groups
  - Subscriptions
  - Resource groups
  - Resource

### Purchase Azure products and services

- customer types
  - Enterprise
  - Web direct
  - Cloud Solution Provider (CSP)
- Factors that affect costs
  - resource type
  - Location
- Zone and billing(zones for billing purposes)
  - **Bandwidth** refers to data moving in and out of Azure datacenters
  - data transfers into Azure datacenters are typically free
  - outbound data transfers, such as data going out of Azure datacenters, data transfer pricing is based on **Zones**
- A Zone is a geographical grouping of Azure Regions for billing purposes. the following Zones exist and include the sample regions as listed below:
  - Zone 1 – West US, East US, Canada West, West Europe, France Central and others
  - Zone 2 – Australia Central, Japan West, Central India, Korea South and others
  - Zone 3 - Brazil South
  - DE Zone 1 - Germany Central, Germany Northeast

### Azure Pricing Calculator

- a tool that helps you estimate the cost of Azure products
- configure options
  - Region
  - Tier
  - Billing Options
  - Support Options
  - Programs and Offers
  - Azure Dev/Test Pricing
- https://azure.microsoft.com/en-us/pricing/calculator/

### Total Cost of Ownership Calculator(TCO)

- Estimate cost savings you can realize by **migrating** to Azure
- Steps
  1. Define your workloads
  2. Adjust assumption
  3. View the report
- https://azure.microsoft.com/pricing/tco/calculator

### Minimizing costs

```
cost Analysis     | Azure Pricing Calculator and TCO Calculator
Monitor Usage     | Azure Advisor identifies unused and under-utilized resource
Spending Limits   | Spending Limits feature, Designed to help prevetn you from exhausting the credit on your account
Reservations      | Discounted prices on certain products/resources if you pay in advance
Location/Regions  | Choose lower-cost locations and regions when deploying resources
Cost-saving Offers| stay up-to-date with the latest Azure customer and subscription offers
Leverage Tags     | apply tags to resources and use those tags to organize billing data
```

- Spending Limits
  - Cost Management + Billing service -> Subscriptions blade
  - https://docs.microsoft.com/en-us/azure/cost-management-billing/manage/spending-limit

### Azure Cost Management

- an Azure product that provides a set of tools for monitoring, allocating, and optimizing your Azure costs
- is free and included with all azure subscription
- toolset include:
  - Data enrichment
  - Budgets
  - Alerting
  - Reports & Recommendations
  - Price

[back to top](#top)

### Planning and managing Azure costs

#### Pricing Factor

- Influences on Pricing
  - Resource Size
  - Resource Type
  - Location
  - Bandwidth
    - Zone & bandwidth
    - ![ZoneBandwidth](https://github.com/honggzb/Study-General/blob/master/Cloud-study/images/zoneBandwidth.png)
- Pricing Calculator
- Total cost of Ownership Calculator

#### Spending Limits && Quotas && Tags && Reserved Instances && Advisor

- Spending Limits
  - Default limit
  - No Increase
  - No Spending Limit: Pay-as-you-go accounts have no spending limit functionality
- Quotas
  - Property Limit:  a quota is a limit on a certain property of an Azure service
  - Ensure Service Level: the quotas are necessary to ensure Azure can maintain their high service level
  - Quota change: ask microsoft to increase them
- Tags
  - Non-functional
  - attach to resource or resource group
  - Use as mangy tags as you want
  - features
    - Identify roles
    - Related Resources: to make bulk processing and updating easire, define which resources are related
    - Filter: filter resources per project, customer or for reporting purpose
    - Unambiguous: create a list for tags used that includes: description, tag name, and potential values
- Pay-as-you-go: expensive
- Reserved Instances
  - can save you a lot of cash
- Advisor
  - The advisor portal gives you best practices advice in general through recommendations

[back to top](#top)

### Support

#### Plans

```
Basic -> Developer -> Standard -> Professional Direct -> Premier tiers
---------------------support-------------------------------------
----------------------cost---------------------------------------
less                                                         More
```

- ![AzurePlan](https://github.com/honggzb/Study-General/blob/master/Cloud-study/images/AzureBlueprint.png)

#### Tickets

- A ticket is a support enquity, is a unique identifier, is a single reference to an issue
- Sequene
  - Submit a ticket through the Azure portal
  - Choose one of four support ticket types(billing, service..., subscription, technical)
  - Fill in details about issue
  - Request is processed according to support plan

#### Other Support Channels

- Azure documentation
- MSDN Azure Forums
- Stack Overflow
- Social Media @AzureSpport twitter
- https://azure.microsoft.com/en-us/support/community/

#### Knowledge Center

- a searchable databast that contains answers to many common support questions
- No New Question: you can't add a new question or add to an existing one
- https://azure.microsoft.com/en-us/resources/knowledge-center/

### Open a support request

1. open portal
2. choose one Subscriptions
3. got to 'New support request' blade

### Service Level Agreements(SLA)

- A contract between you and Azure documenting Microsoft commitment for uptime and connectivity
  - Multiple SLAs: There are many SLAs in Azure. General one SLA per product. You automatically use the SLA for the service you use
  - Complex: SLAs can have various levels depending on the number and variety of services, which region you use, and much more
  - **Mandatory:** but no SLAs for free products and services
- SLAs for Azure products or services
  - performance targets for an Azure product or service
  - Service Credits
    - SLAs also describe how Microsoft will respond if an Azure product or service fails to perform to its governing SLA's specification
- Composite SLA
  - Multiplying the SLAs percentages together if have many services
- Application SLA

### Service Lifecycle

#### Azure Preview

- `https://preview.portal.azure.com`
- Categories
  - Private preview:
    - only available to specific customers invited by the product team behind the service
  - Public preview:
    - Available to all Azure customers.
    - Enable preview features in the Azure Portal
- Can watch the Azure Updates feed for new products, features and more

#### Azure updates

- https://azure.microsoft.com/updates

[back to top](#top)

> https://docs.microsoft.com/en-us/learn/certifications/azure-fundamentals
